sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/m/MessagePopover","sap/m/MessagePopoverItem","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/suite/ui/generic/template/lib/MessageUtils","sap/suite/ui/generic/template/lib/testableHelper"],function(q,B,M,a,F,b,c,t){"use strict";F=t.observableConstructor(F,true);var p=new F({path:"persistent",operator:b.EQ,value1:false});var v=new F({path:"validation",operator:b.EQ,value1:true});var I=new F({filters:[v,new F({path:"validation",operator:b.EQ,value1:false})],and:true});function g(V){var T=function(o){if(!o){return false;}var P=o.split("/");var C=P[0];P=C.split("--");var s=P[0];var e=sap.ui.getCore();for(var f=e.byId(s);f;f=f.getParent()){if(f===V){return true;}}return false;};return new F({path:"target",test:T,caseSensitive:true});}function d(C,h,e){var o=h.controller;var s=h.scrollDelegate;var A=false;var m=o.byId("showMessages");var f=C.getDialogFragment("sap.suite.ui.generic.template.fragments.MessagePopover",{itemSelected:q.noop||c.navigateFromMessageViewEvent.bind(null,s)});f.setModel(sap.ui.getCore().getMessageManager().getMessageModel(),"msg");var j=f.getBinding("items");var E;(function(){var i=o.getOwnerComponent();E=new F({path:"target",operator:b.EQ,value1:"/"+i.getEntitySet()});var T=i.getModel("_templPriv");T.setProperty("/generic/messageCount",0);var P=C.getText("MESSAGE_BUTTON_TOOLTIP_P",0);T.setProperty("/generic/messageButtonTooltip",P);j.attachChange(function(){var Q=j.getLength();T.setProperty("/generic/messageCount",Q);P=C.getText(Q===1?"MESSAGE_BUTTON_TOOLTIP_S":"MESSAGE_BUTTON_TOOLTIP_P",Q);T.setProperty("/generic/messageButtonTooltip",P);});})();var l=new F({filters:[v,g(o.getView())],and:true});var k=[];var n;var r=0;var N;var u;var w;function x(P){if(q.isArray(P)){var Q=false;for(var i=0;i<P.length;i++){Q=x(P[i])||Q;}return Q;}if(P instanceof Promise){P.then(N);return false;}w.push(P);return true;}function y(i){u=i;j.filter(u);}function z(){if(A){var i=new F({filters:w,and:false});var P=new F({filters:[i,p],and:true});y(new F({filters:[P,l],and:false}));}}function R(i,P){if(i===r&&x(P)){z();}}function D(P){var i=P();return x(i);}function G(){k.forEach(D);}function H(i){n=i;r++;N=R.bind(null,r);w=e?[new F({path:"target",operator:b.StartsWith,value1:n}),E]:[];G();z();}function J(P){k.push(P);if(n!==undefined&&D(P)){z();}}var S;function K(){S=S||function(){if(j.getLength()>0){f.openBy(m);}};setTimeout(S,0);}function L(i){A=i;if(i){if(w){z();}}else{w=null;y(I);}}function O(i){return i?l:u;}return{adaptToContext:H,toggleMessagePopover:f.toggle.bind(f,m),showMessagePopover:K,registerMessageFilterProvider:J,setEnabled:L,getMessageFilters:O};}return B.extend("sap.suite.ui.generic.template.lib.MessageButtonHelper",{constructor:function(C,h,i){q.extend(this,(t.testableStatic(d,"MessageButtonHelper"))(C,h,i));}});});
