sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/base/Event","sap/ui/core/mvc/ControllerExtension","sap/ui/Device","sap/ui/model/Context","sap/ui/model/Filter","sap/ui/model/json/JSONModel","sap/m/Table","sap/m/ListBase","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavigationHandler","sap/ui/generic/app/navigation/service/NavError","sap/suite/ui/generic/template/lib/testableHelper"],function(q,B,E,C,D,a,F,J,R,L,M,N,b,t){"use strict";function c(e,p){var i=sap.ui.require(p);return typeof i==="function"&&(e instanceof i);}function d(e){return c(e,"sap/ui/comp/smarttable/SmartTable");}function f(e){return c(e,"sap/ui/comp/smartchart/SmartChart");}function g(e){return c(e,"sap/ui/table/Table");}function h(e){return c(e,"sap/ui/table/AnalyticalTable");}function l(e){return c(e,"sap/ui/table/TreeTable");}function m(e){return c(e,"sap/m/Table");}function n(e){if(f(e)||d(e)){return e.getEntitySet();}else if(d(e.getParent())){return e.getParent().getEntitySet();}}var d=t.testableStatic(d,"CommonUtils_isSmartTable");function o(p,s,r){var u;var v=Object.create(null);function w(e,i,j){var k=e instanceof E?e.getSource():e;var E1=k.getId();var F1=v[E1];if(!F1){if(j){return null;}F1={control:k,infoObject:Object.create(null),categories:[]};(i||q.noop)(F1.infoObject,F1.categories,k);v[E1]=F1;}return F1.infoObject;}function x(e,i){for(var j in v){var k=v[j];if(k.categories.indexOf(e)>=0){i(k.infoObject,k.control);}}}function A(e){s.oApplication.attachControlToParent(e,p.getView());}function y(e,i,j,k){return s.oApplication.getDialogFragmentForView(p.getView(),e,i,j,k);}var z;function G(){z=z||p.getOwnerComponent().getModel("i18n").getResourceBundle();return z.getText.apply(z,arguments);}function H(e){var i=e.getSelectionBehavior();if(i==="DATAPOINT"){return{"dataPoints":e.getSelectedDataPoints().dataPoints,"count":e.getSelectedDataPoints().count};}else if(i==="CATEGORY"){return{"dataPoints":e.getSelectedCategories().categories,"count":e.getSelectedCategories().count};}else if(i==="SERIES"){return{"dataPoints":e.getSelectedSeries().series,"count":e.getSelectedSeries().count};}}function I(e){var j=[];if(d(e)){e=e.getTable();}else if(f(e)){e=e.getChart();if(e&&e.getMetadata().getName()==="sap.chart.Chart"){var k,E1=false;k=H(e);if(k&&k.count>0){if(e.getSelectionBehavior()==="DATAPOINT"){E1=true;}var F1=k.dataPoints;var G1=[];for(var i=0;i<F1.length;i++){if(E1){if(F1[i].context){j.push(F1[i].context);}}else{G1.push(F1[i].dimensions);}}if(!E1){j[0]=G1;}}}}if(e instanceof L){j=e.getSelectedContexts();}else if(g(e)){var H1=e.getSelectedIndices();for(var i=0;i<H1.length;i++){j.push(e.getContextByIndex(H1[i]));}}return j;}function K(e){var i={};if(e instanceof sap.ui.core.Element){e.getCustomData().forEach(function(j){i[j.getKey()]=j.getValue();});}return i;}function S(e){var j,k,E1,F1,G1,H1;var I1=$(e);if(!d(I1)&&!f(I1)){I1=I1.getParent();}var J1=I(I1);var K1=I1.getModel();var L1=K1.getMetaModel();var M1=p.getView();if(d(I1)){j=I1.getCustomToolbar()&&I1.getCustomToolbar().getContent();k=X(I1);V(k,J1,K1,I1);}else if(f(I1)){j=I1.getToolbar()&&I1.getToolbar().getContent();var N1=p.getOwnerComponent().getAppComponent();var O1=N1.getConfig();if(p.getMetadata().getName()==='sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage'){k=X(I1);V(k,J1,K1,I1);}else if(O1&&O1.pages[0]&&O1.pages[0].component&&O1.pages[0].component.settings&&O1.pages[0].component.settings.quickVariantSelectionX){k=X(I1);V(k,J1,K1);}}if(j&&j.length>0){for(var i=0;i<j.length;i++){G1=undefined;E1=j[i];if(E1.getMetadata().getName()==="sap.m.Button"&&E1.getVisible()){H1=K(E1);if(H1&&H1.Type){F1=M1.getLocalId(E1.getId());if(H1.Type==="CRUDActionDelete"){G1=T(K1,L1,J1,I1);I1.getModel("_templPriv").setProperty("/listReport/deleteEnabled",G1);}else if(H1.Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||H1.Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){G1=Q(K1,L1,J1,H1.Type,H1.Action,I1);}}if(/generic\/controlProperties/.test(E1.getBindingPath("enabled"))&&G1!==undefined){P(F1,"enabled",G1);}}}}}function O(e){var i;var j=$(e);var k=I(j);var E1=e.getModel();i=Y();V(i,k,E1,j);}function P(i,e,j){var k=p.getView().getModel("_templPriv");var E1=k.getProperty("/generic/controlProperties/"+i);if(!E1){E1={};E1[e]=j;k.setProperty("/generic/controlProperties/"+i,E1);}else{k.setProperty("/generic/controlProperties/"+i+"/"+e,j);}}function Q(e,i,k,E1,F1,G1){var H1,I1,J1,K1;var L1=false;if(E1==="com.sap.vocabularies.UI.v1.DataFieldForAction"){H1=i.getODataFunctionImport(F1);J1=H1&&H1["sap:action-for"];if(J1&&J1!==""&&J1!==" "){if(k.length>0){K1=H1["sap:applicable-path"];if(K1&&K1!==""&&K1!==" "){for(var j=0;j<k.length;j++){if(!k[j]){continue;}I1=e.getObject(k[j].getPath());if(I1&&I1[K1]===true){L1=true;break;}}}else{L1=true;}}}else{L1=true;}}else if(E1==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(k.length>0||(f(G1)&&G1.getDrillStackFilters().length>0)){L1=true;}}return L1;}function T(e,j,k,E1){var F1=U(E1);var G1=false;var H1;var I1=j.getODataEntitySet(E1.getEntitySet());if(sap.suite.ui.generic.template.js.AnnotationHelper.areDeleteRestrictionsValid(j,I1.entityType,F1)){if(k.length>0){var J1=F1&&F1.Deletable&&F1.Deletable.Path;for(var i=0;i<k.length;i++){H1=e.getObject(k[i].getPath());if(!H1){break;}if(J1){if(k[i]&&e.getProperty(J1,k[i])){if(!(H1.IsActiveEntity&&H1.HasDraftEntity&&H1.DraftAdministrativeData&&e.getProperty("DraftAdministrativeData/InProcessByUser",k[i]))){G1=true;break;}}}else{if(!(H1.IsActiveEntity&&H1.HasDraftEntity&&H1.DraftAdministrativeData&&e.getProperty("DraftAdministrativeData/InProcessByUser",k[i]))){G1=true;break;}}}}}return G1;}function U(e){var i=e.getModel()&&e.getModel().getMetaModel();var j=i&&i.getODataEntitySet(e.getEntitySet());var k=j&&j["Org.OData.Capabilities.V1.DeleteRestrictions"];return k;}function V(e,i,j,k){var E1=Z(k);var F1=p.getView().getModel("_templPriv");var G1=F1.getProperty("/generic/listCommons/breakoutActionsEnabled");if(E1){var H1=p.byId("template::IconTabBar");var I1="";if(H1){I1=H1.getSelectedKey();}W(G1,E1,e,i,j,I1,k);}F1.setProperty("/generic/listCommons/breakoutActionsEnabled",G1);}function W(e,i,j,k,E1,F1,G1){var H1;for(var I1 in i){H1=true;if(i[I1].requiresSelection){if(k.length>0){if(i[I1].applicablePath!==undefined&&i[I1].applicablePath!==""){H1=false;for(var J1=0;J1<k.length;J1++){var K1="";var L1=i[I1].applicablePath.split("/");if(L1.length>1){for(var M1=0;M1<L1.length-1;M1++){K1+="/"+L1[M1];}}var N1=E1.getObject(k[J1].getPath()+K1);var O1=L1[L1.length-1];if(N1[O1]===true){H1=true;break;}}}}else if(f(G1)&&G1.getDrillStackFilters().length>0){H1=true;}else{H1=false;}}var P1=i[I1].id+((F1&&!i[I1].determining)?"-"+F1:"");e[P1]={enabled:H1};}}function X(e){var i=[];var j=Z(e);for(var k in j){i.push(j[k].id);}return i;}function Y(){var e=[];var i=Z();for(var j in i){if(i[j].determining){e.push(j);}}return e;}function Z(e){var i=p.getOwnerComponent().getAppComponent().getManifestEntry("sap.ui5");var j=i.extends&&i.extends.extensions&&i.extends.extensions["sap.ui.controllerExtensions"];j=j&&j[p.getOwnerComponent().getTemplateName()];j=j&&j["sap.ui.generic.app"];var k=p.getOwnerComponent().getEntitySet();var E1=K(e).sectionId;if(!E1){return j&&j[k]&&j[k]["Actions"];}else{var F1=j&&j[k]&&j[k]["Sections"];return F1&&F1[E1]&&F1[E1].Actions;}}function $(e){var i=e;while(i){if(i instanceof R||g(i)||d(i)||f(i)){return i;}i=i.getParent&&i.getParent();}return null;}function _(e){if(d(e)){e=e.getTable();}if(g(e)){return e.getBindingInfo("rows");}else if(e instanceof R){return e.getBindingInfo("items");}return null;}function a1(e){var i=_(e);if(i&&i.binding){i.binding.refresh();}else if(e&&e.rebindTable){e.rebindTable();}}function b1(e){var i=p.getOwnerComponent();var j=i.getModel();var k,E1;var F1=!s.oApplication.checkEtags();if(F1){E1=_(e);if(E1){k=E1.path;var G1=e.getEntitySet();var H1=j.getMetaModel();var I1=H1.getODataEntitySet(G1);if(p.getMetadata().getName()==='sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage'&&c1(j,I1)){j.invalidateEntityType(I1.entityType);}else{j.invalidate(d1.bind(null,k));}var J1=i.getId();var K1=Object.create(null);K1[J1]=true;s.oApplication.refreshAllComponents(K1);}}}function c1(e,i){q.sap.require("sap.ui.model.analytics.odata4analytics");var j=new sap.ui.model.analytics.odata4analytics.Model(sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(e));var k=j.findQueryResultByName(i.name);var E1=k.getParameterization();return!!E1;}function d1(e,k,i){var j=e[0]==="/"?e.substr(1):e;if(k.split("(")[0]===j){return true;}else{return false;}}function e1(e,i){var j=e.getPath();var k=p.getOwnerComponent();var E1=k.getComponentContainer().getElementBinding();var F1=E1?E1.getPath():"";var G1=null;if(j.indexOf(F1)!==0){G1=_(i).path;}var H1=!s.oApplication.isNewHistoryEntryRequired(e,G1);var I1;if(r.isDraftEnabled()){I1=s.oDraftController.isActiveEntity(e)?1:6;}else{I1=k.getModel("ui").getProperty("/editable")?6:1;}var J1=r.getViewLevel();if(J1===0){var K1=s.oApplication.getForwardNavigationProperty(J1);}if(K1){var L1=new Promise(function(N1){e.getModel().createBindingContext(K1,e,null,function(O1){if(O1){s.oNavigationController.navigateToContext(O1,G1,H1,I1);N1();}else{r.navigateToDataLoadedFailedPage();N1();}});});var M1=s.oApplication.getBusyHelper();M1.setBusy(L1);}else{s.oNavigationController.navigateToContext(e,G1,H1,I1);}}function f1(e,i){if(e instanceof a){s.oNavigationController.navigateToContext(e,i&&i.navigationProperty,i&&i.replaceInHistory);return;}var j=i&&i.routeName;if(j){r.navigateRoute(j,e,null,i&&i.replaceInHistory);return;}q.sap.log.warning("navigateToContext called without context or route");}function g1(e){if(e instanceof b){if(e.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){M.show(G("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:G("ST_GENERIC_ERROR_TITLE")});}else{M.show(e.getErrorCode(),{title:G("ST_GENERIC_ERROR_TITLE")});}}}function h1(e,i){u1(function(){u=B1();var j={semanticObject:e.semanticObject,action:e.action};var k=u.mixAttributesAndSelectionVariant(e.parameters);p.adaptNavigationParameterExtension(k,j);u.navigate(e.semanticObject,e.action,k.toJSONString(),null,g1);},q.noop,i,"LeavePage");}function i1(e){var E1=[],F1,G1,H1;var I1=p.getOwnerComponent();var J1=I1.getModel().getMetaModel();if(!e){return{};}var K1=I1.getAppComponent().getConfig().pages[0];if(!K1){return{};}var L1=function(i){H1=J1.getODataEntitySet(i.entitySet).entityType;G1=J1.getODataEntityType(H1);F1={};F1={entitySet:i.entitySet,aKeys:J1.getODataEntityType(H1).key.propertyRef,navigationProperty:i.navigationProperty};for(var j=0,N1=F1.aKeys.length;j<N1;j++){var k=0,O1=G1.property.length;for(k;k<O1;k++){if(F1.aKeys[j].name===G1.property[k].name){F1.aKeys[j].type=G1.property[k].type;break;}}}};var M1=function(e,K1){if(!K1.pages){return E1;}for(var i=0,j=K1.pages.length;i<j;i++){if(!K1.pages[i]){break;}if(e===K1.pages[i].entitySet){L1(K1.pages[i]);E1.splice(0,0,F1);break;}E1=M1(e,K1.pages[i]);if(E1.length>0){L1(K1.pages[i]);E1.splice(0,0,F1);}}return E1;};return M1(e,K1);}function j1(k,e){var E1,F1,i,G1;for(i=0,G1=k.length;i<G1;i++){if(k[i].navigationProperty){F1+="/"+k[i].navigationProperty;}else{F1="/"+k[i].entitySet;}for(var j=0,H1=k[i].aKeys.length;j<H1;j++){if(j===0){F1+="(";E1="";}else{E1=",";}switch(k[i].aKeys[j].type){case"Edm.Guid":if(e.DraftAdministrativeData&&e.DraftAdministrativeData.DraftIsCreatedByMe){F1+=E1+k[i].aKeys[j].name+"="+"guid'"+e.DraftAdministrativeData[k[i].aKeys[j].name]+"'";}else{F1+=E1+k[i].aKeys[j].name+"="+"guid'"+e[k[i].aKeys[j].name]+"'";}break;case"Edm.Boolean":if(e.DraftAdministrativeData&&e.DraftAdministrativeData.DraftIsCreatedByMe){F1+=E1+k[i].aKeys[j].name+"="+false;}else{F1+=E1+k[i].aKeys[j].name+"="+e[k[i].aKeys[j].name];}break;default:if(typeof e[k[i].aKeys[j].name]==="string"){F1+=E1+k[i].aKeys[j].name+"="+"'"+e[k[i].aKeys[j].name]+"'";}else{F1+=E1+k[i].aKeys[j].name+"="+e[k[i].aKeys[j].name];}break;}if(j===(H1-1)){F1+=")";}}}return F1;}function k1(e,k,p){var E1,F1,G1,H1,I1,J1,K1;var L1={semanticObject:"",action:""};u=B1();for(H1 in e.semanticAttributesOfSemanticObjects){E1=u.mixAttributesAndSelectionVariant({},k);for(G1 in e.semanticAttributesOfSemanticObjects[H1]){if(!E1.getSelectOption(G1)){E1.addParameter(G1,"");}}I1=E1.getPropertyNames();L1.semanticObject=H1;p.adaptNavigationParameterExtension(E1,L1);J1=E1.getSelectOptionsPropertyNames();K1=E1.getParameterNames();for(var i=0,M1=I1.length;i<M1;i++){if(J1.indexOf(I1[i])<0&&K1.indexOf(I1[i])<0){delete e.semanticAttributesOfSemanticObjects[H1][I1[i]];E1.removeSelectOption(I1[i]);}}if(H1===e.semanticObject){var N1=e.semanticAttributesOfSemanticObjects[""];for(var j=0,M1=K1.length;j<M1;j++){if(K1[j]in N1){E1.removeParameter(K1[j]);}else{E1.removeParameter(K1[j]);E1.addParameter(K1[j],e.semanticAttributesOfSemanticObjects[e.semanticObject][K1[j]]);}}E1=u.mixAttributesAndSelectionVariant(e.semanticAttributesOfSemanticObjects[H1],k);F1=E1.toJSONString();}}delete e.semanticAttributes;u.processBeforeSmartLinkPopoverOpens(e,F1);}function l1(e,j){var k=function(I1){for(var i=0;i<I1.length;i++){j(I1[i].name);}};var E1=p.getView().getModel().getMetaModel();var F1=E1.getODataEntitySet(e,false);var G1=E1.getODataEntityType(F1.entityType,false);k(G1.key.propertyRef);var H1=s.oDraftController.getDraftContext();if(H1.isDraftEnabled(e)){k(H1.getSemanticKey(e));j("IsActiveEntity");j("HasDraftEntity");j("HasActiveEntity");}}function m1(e,i){if(!r.isDraftEnabled()||!e){return;}var j=e.getControlByKey("EditState");var k=j&&j.getSelectedKey()||"";switch(k){case"1":i.filters.push(new F("IsActiveEntity","EQ",true));i.filters.push(new F("HasDraftEntity","EQ",false));break;case"2":i.filters.push(new F("IsActiveEntity","EQ",false));break;case"3":i.filters.push(new F("IsActiveEntity","EQ",true));i.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));i.filters.push(new F("DraftAdministrativeData/InProcessByUser","NE",""));break;case"4":i.filters.push(new F("IsActiveEntity","EQ",true));i.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));i.filters.push(new F("DraftAdministrativeData/InProcessByUser","EQ",""));break;default:var E1=new F({filters:[new F("IsActiveEntity","EQ",false),new F("SiblingEntity/IsActiveEntity","EQ",null)],and:false});if(i.filters[0]&&i.filters[0].aFilters){var F1=i.filters[0];i.filters[0]=new F([F1,E1],true);}else{i.filters.push(E1);}break;}}function n1(i,j){if(i&&i.getAnalyticBindingPath&&i.getConsiderAnalyticalParameters()){try{var k=i.getAnalyticBindingPath();if(k){j(k);}}catch(e){q.sap.log.warning("Mandatory parameters have no values","","ListReport");}}}function o1(e,j,k){for(var i=0;i<j.length;i++){var E1=j[i];var F1=E1.lastIndexOf("/");var G1;if(F1<0){if(s.oApplication.getNavigationProperty(e,E1)){G1=E1;}else{continue;}}else{G1=E1.substring(0,F1);}if(k.indexOf(G1)===-1){k.push(G1);}}}function p1(e,i,j){var k=e.getParameter("bindingParams");k.parameters=k.parameters||{};var E1=function(L1,M1){if(i&&i[L1]){var N1=true;var O1=function(){var P1=arguments[0];if(!(P1 instanceof C)){throw new Error("Please provide a valid ControllerExtension in order to execute extension "+L1);}if(!N1){throw new Error("Extension "+L1+" must be executed synchronously");}var Q1=Array.prototype.slice.call(arguments,1);M1.apply(null,Q1);};i[L1](O1);N1=false;}};var F1=function(L1){k.filters.push(L1);};m1(j,k);E1("addExtensionFilters",F1);n1(j,i.setBindingPath);var G1=e.getSource();var H1=G1.getEntitySet();var I1=k.parameters.select&&k.parameters.select.split(",")||[];var J1=k.parameters.expand&&k.parameters.expand.split(",")||[];var K1=function(L1){if(L1&&q.inArray(L1,I1)===-1){I1.push(L1);}};l1(H1,K1);E1("ensureExtensionFields",K1);(i.addNecessaryFields||q.noop)(I1,K1,H1);o1(H1,I1,J1);if(J1.length>0){k.parameters.expand=J1.join(",");}if(I1.length>0){k.parameters.select=I1.join(",");}}function q1(e,i,j){if(!e){return G("DRAFT_OBJECT");}else if(i){return G(j?"LOCKED_OBJECT":"UNSAVED_CHANGES");}else{return"";}}function r1(){var e=y("sap.suite.ui.generic.template.fragments.DraftAdminDataPopover",{formatText:function(){var i=Array.prototype.slice.call(arguments,1);var k=arguments[0];if(!k){return"";}if(i.length>0&&(i[0]===null||i[0]===undefined||i[0]==="")){if(i.length>3&&(i[3]===null||i[3]===undefined||i[3]==="")){return(i.length>2&&(i[1]===null||i[1]===undefined||i[1]===""))?"":i[2];}else{return G(k,i[3]);}}else{return G(k,i[0]);}},closeDraftAdminPopover:function(){e.close();},formatDraftLockText:q1},"admin");return e;}function s1(e,i,j,k,E1,F1){var G1=s.oApplication.getBusyHelper();if(!E1&&G1.isBusy()){return;}if(!r.isDraftEnabled()){var H1=false;if(j&&j.aUnsavedDataCheckFunctions){H1=j.aUnsavedDataCheckFunctions.some(function(L1){return L1();});}var I1=p.getView();var J1=I1.getModel();if(H1||J1.hasPendingChanges()){var K1;w1(function(){I1.setBindingContext(null);J1.resetChanges();I1.setBindingContext();r.fire(p,"AfterCancel",{});K1=e();},function(){K1=i();},k,F1);return K1;}}return e();}function t1(e,i,j,k){var E1=false;if(j&&j.aUnsavedDataCheckFunctions){E1=j.aUnsavedDataCheckFunctions.some(function(G1){return G1();});}if(E1||p.getView().getModel().hasPendingChanges()){var F1;y1(function(){p.getView().getModel().resetChanges();r.fire(p,"AfterCancel",{});F1=e();},function(){F1=i();},k);return F1;}return e();}function u1(e,i,j,k,E1,F1){if(E1){return s1(e,i,j,k,true,F1);}s.oApplication.performAfterSideEffectExecution(s1.bind(null,e,i,j,k,false,F1));}var v1;function w1(e,i,j,k){var E1;v1=e;if(!j||!k){var F1=y("sap.suite.ui.generic.template.fragments.DataLoss",{onDataLossOK:function(){F1.close();v1();},onDataLossCancel:function(){F1.close();i();}},"dataLoss");if(!j){j="LeavePage";}E1=F1.getModel("dataLoss");E1.setProperty("/mode",j);F1.open();}else{var G1=y("sap.suite.ui.generic.template.fragments.DiscardDraftPopover",{onDiscardConfirm:function(){v1();}},"discard");E1=G1.getModel("discard");E1.setProperty("/placement",sap.m.PlacementType.Top);if(j!=="Proceed"){E1.setProperty("/isCreateDraft",true);}else{E1.setProperty("/isCreateDraft",false);}E1.setProperty("/mode",j);G1.openBy(k.getSource());}}var x1;function y1(e,i,j){x1=e;if(!j){j="LeavePage";}var k=y("sap.suite.ui.generic.template.fragments.DataLossTechnicalError",{onDataLossOK:function(){k.close();x1();},onDataLossCancel:function(){k.close();i();}},"dataLoss");var E1=k.getModel("dataLoss");E1.setProperty("/mode",j);k.open();}function z1(e,i,j,k,E1,F1){if(i.busy.check&&k.isBusy()){F1();return;}var G1=i.busy.set?function(){k.setBusy(Promise.resolve(),false,{actionLabel:i.sActionLabel});return e();}:e;var H1=i.mConsiderObjectsAsDeleted?function(J1){s.oApplication.prepareDeletion(i.mConsiderObjectsAsDeleted);return G1();}:G1;var I1=(i.dataloss.popup?u1(H1,F1,j,(i.dataloss.navigation?"LeavePage":"Proceed"),true):H1());if(I1 instanceof Promise){I1.then(E1,F1);}else{E1();}}function A1(e,i,j){i=q.extend(true,{busy:{set:true,check:true},dataloss:{popup:true,navigation:false}},i);var k=s.oApplication.getBusyHelper();var E1=new Promise(function(F1,G1){s.oApplication.performAfterSideEffectExecution(z1.bind(null,e,i,j,k,F1,G1));});if(i.busy.set){k.setBusy(E1,false,{actionLabel:i.sActionLabel});}return E1;}function B1(){u=u||new N(p);return u;}function C1(e){var j;var k=r.getTemplatePrivateModel();var E1,F1,G1,H1,I1,J1=[],K1=[],i,L1,M1,N1,O1,P1,Q1;var R1,S1;E1=p.getOwnerComponent().getAppComponent();F1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");G1=k.getProperty("/generic/supportedIntents/");if(f(e)){j=e.getToolbar();}else if(d(e)){j=e.getCustomToolbar();}H1=j.getContent();I1=H1.length;for(i=0;i<I1;i++){L1=K(H1[i]);if(L1.hasOwnProperty("SemanticObject")&&L1.hasOwnProperty("Action")){M1=L1.SemanticObject;N1=L1.Action;O1={semanticObject:M1,action:N1,ui5Component:E1};J1.push([O1]);P1=q.extend({},O1);P1.bLinkIsSupported=false;K1.push(P1);}}if(J1.length>0&&F1){Q1=F1.getLinks(J1);Q1.done(function(T1){G1=k.getProperty("/generic/supportedIntents/");R1=T1.length;for(i=0;i<R1;i++){if(T1[i][0].length>0){K1[i].bLinkIsSupported=true;}M1=K1[i].semanticObject;N1=K1[i].action;S1=k.getProperty("/generic/supportedIntents/"+M1);if(!S1){G1[M1]={};G1[M1][N1]={"visible":K1[i].bLinkIsSupported};}else if(!S1[N1]){S1[N1]={"visible":K1[i].bLinkIsSupported};}else{S1[N1]["visible"]=K1[i].bLinkIsSupported;}}k.updateBindings();});}}function D1(e,k){var E1=[],F1;var G1=K(e).variantAnnotationPath;if(!G1&&k){G1=K(k).variantAnnotationPath;}if(G1){var H1=e.getModel();var I1=H1.getMetaModel();var J1=e.getEntitySet();var K1=I1.getODataEntitySet(J1);var L1=I1.getODataEntityType(K1.entityType);var M1=L1[G1];if(!M1){return;}if(!M1.SelectOptions&&M1.SelectionVariant){M1=M1.SelectionVariant;if(M1.Path){var G1=M1.Path.split("@")[1];M1=G1&&L1[G1];}}if(M1.AnnotationPath){F1=M1.AnnotationPath.split("@")[1];M1=L1[F1];}for(var i in M1.SelectOptions){if(M1.SelectOptions[i].PropertyName){var N1=M1.SelectOptions[i].PropertyName.PropertyPath;for(var j in M1.SelectOptions[i].Ranges){var O1=M1.SelectOptions[i].Ranges[j].Option;O1.EnumMember=O1.EnumMember.replace("com.sap.vocabularies.UI.v1.SelectionRangeOptionType/","");var P1=M1.SelectOptions[i].Ranges[j].Low;var Q1=M1.SelectOptions[i].Ranges[j].High;var R1=Object.keys(P1)[0];if(Q1){var S1=Object.keys(Q1)[0];E1.push(new sap.ui.model.Filter(N1,O1.EnumMember,P1[R1],Q1[S1]));}else{E1.push(new sap.ui.model.Filter(N1,O1.EnumMember,P1[R1]));}}}}}return E1;}var B1=t.testable(B1,"getNavigationHandler");var V=t.testable(V,"fillEnabledMapForBreakoutActions");var X=t.testable(X,"getBreakoutActionIds");var $=t.testable($,"getOwnerControl");var I=t.testable(I,"getSelectedContexts");return{isSmartTable:d,isSmartChart:f,isUiTable:g,isAnalyticalTable:h,isTreeTable:l,isMTable:m,getCurrentEntitySetName:n,getText:G,getNavigationHandler:B1,getNavigationKeyProperties:i1,mergeNavigationKeyPropertiesWithValues:j1,executeGlobalSideEffect:function(){if(r.isDraftEnabled()){var e=p.getView();e.attachBrowserEvent("keydown",function(i){var j=(i.target.type==="search")?true:false;var k=(i.target.type==="textarea")?true:false;if(i.keyCode===13&&i.ctrlKey!==true&&e.getModel("ui").getProperty("/editable")&&!j&&!k){var E1=p.getOwnerComponent().getAppComponent().getConfig();var F1=E1.settings&&E1.settings.forceGlobalRefresh;var G1;s.oApplication.addSideEffectPromise(new Promise(function(H1){G1=H1;}));setTimeout(function(){var H1=s.oApplicationController.executeSideEffects(e.getBindingContext(),null,null,F1);H1.then(function(){G1();setTimeout(function(){document.getElementById(i.target.id).focus();});});});}});}},setEnabledToolbarButtons:S,setEnabledFooterButtons:O,fillEnabledMapForBreakoutActions:V,getBreakoutActions:Z,getSelectedContexts:I,getSelectionPoints:H,getDeleteRestrictions:U,setPrivateModelControlProperty:P,navigateFromListItem:e1,navigateToContext:f1,navigateExternal:h1,semanticObjectLinkNavigation:k1,getSelectionVariantFilters:D1,getCustomData:function(e){var j=e.getSource().getCustomData();var k={};for(var i=0;i<j.length;i++){k[j[i].getKey()]=j[i].getValue();}return k;},onBeforeRebindTableOrChart:p1,formatDraftLockText:q1,showDraftPopover:function(e,i){var j=r1();var k=j.getModel("admin");k.setProperty("/IsActiveEntity",e.getProperty("IsActiveEntity"));k.setProperty("/HasDraftEntity",e.getProperty("HasDraftEntity"));j.bindElement({path:e.getPath()+"/DraftAdministrativeData"});if(j.getBindingContext()){j.openBy(i);}else{j.getObjectBinding().attachDataReceived(function(){j.openBy(i);});}},getContentDensityClass:function(){return s.oApplication.getContentDensityClass();},attachControlToView:A,getDialogFragment:y,processDataLossConfirmationIfNonDraft:u1,processDataLossTechnicalErrorConfirmation:t1,securedExecution:A1,getOwnerControl:$,getTableBindingInfo:_,refreshSmartTable:a1,refreshModel:b1,getElementCustomData:K,triggerAction:function(e,i,j,k,E1){u1(function(){s.oCRUDManager.callAction({functionImportPath:j.Action,contexts:e,sourceControl:k,label:j.Label,operationGrouping:"",navigationProperty:""}).then(function(F1){if(F1&&F1.length>0){var G1=F1[0];if(G1.response&&G1.response.context&&(!G1.actionContext||G1.actionContext&&G1.response.context.getPath()!==G1.actionContext.getPath())){s.oApplication.getBusyHelper().getUnbusy().then(s.oViewDependencyHelper.setMeToDirty.bind(null,p.getOwnerComponent(),i));}}});},q.noop,E1,"Proceed");},checkToolbarIntentsSupported:C1,getControlInformation:w,executeForAllInformationObjects:x};}return B.extend("sap.suite.ui.generic.template.lib.CommonUtils",{constructor:function(e,s,i){q.extend(this,o(e,s,i));}});});
