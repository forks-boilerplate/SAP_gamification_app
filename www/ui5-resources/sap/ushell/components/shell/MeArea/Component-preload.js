sap.ui.require.preload({"sap/ushell/components/shell/MeArea/Component.js":function(){
/*!
 * ${copyright}
 */
sap.ui.define(['sap/ushell/resources','sap/ui/core/UIComponent','sap/ushell/components/applicationIntegration/AppLifeCycle','sap/ushell/components/flp/ComponentKeysHandler','sap/ushell/ui/footerbar/ContactSupportButton','sap/ushell/ui/footerbar/EndUserFeedback','sap/ushell/EventHub','sap/ushell/Config'],function(r,U,A,C,a,E,b,c){"use strict";return U.extend("sap.ushell.components.shell.MeArea.Component",{metadata:{version:"${version}",library:"sap.ushell.components.shell.MeArea",dependencies:{libs:["sap.m","sap.ui.layout"]}},createContent:function(){this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.oSearchPrefs=false;var t=this,o=this.getComponentData().config,m;function s(S){t._createMeArea();t.toggleMeAreaView(m,S);t.oRenderer.addShellDanglingControl(m);}this.bIsMeAreaCreated=false;this.oDefConfig={view:{position:"left"}};this.oDefConfig=jQuery.extend(this.oDefConfig,o);m=sap.ui.getCore().byId("meAreaHeaderButton");m.applySettings({tooltip:sap.ushell.Container.getUser().getFullName(),icon:'{/userImage/personPlaceHolder}',selected:{path:"/currentViewPortState",formatter:function(v){if(v==='LeftCenter'){return true;}return false;}},press:function(){s(!this.getSelected());},visible:true,enabled:true,showSeparator:false,ariaLabel:"{i18n>MeAreaToggleButtonAria}"}).removeStyleClass("sapUshellPlaceHolders");var e=m.onAfterRendering;m.onAfterRendering=function(){if(e){e.apply(this,arguments);}jQuery(this.getDomRef()).attr("aria-pressed",t.oRenderer.getMeAreaSelected());};m.addEventDelegate({onsapskipforward:function(g){sap.ushell.renderers.fiori2.AccessKeysHandler.bForwardNavigation=true;g.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsaptabprevious:function(g){var v=sap.ui.getCore().byId('viewPortContainer'),h=v.getCurrentState(),R;switch(h){case"LeftCenter":R=jQuery("#meAreaIconTabBar-content li:first");if(R.length>0){R[0].focus();}else{var o=window["sap-ushell-config"],i=jQuery.sap.getObject("renderers.fiori2.componentData.config.enableRecentActivity",undefined,o);if(i&&A.getElementsModel().getModel().getProperty("/enableTrackingActivity")){jQuery("#meAreaIconTabBar .sapMITBText")[0].focus();}else{g.preventDefault();jQuery('.sapUshellActionItem:last')[0].focus();}}break;case"RightCenter":break;case"Center":if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){g.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}break;default:}},onsapskipback:function(g){var v=sap.ui.getCore().byId('viewPortContainer'),h=v.getCurrentState(),n;switch(h){case"LeftCenter":g.preventDefault();n=jQuery("#meAreaIconTabBar .sapMITBSelected");if(n.length===0){n=jQuery(".sapUshellActionItem");}n[0].focus();break;case"RightCenter":break;case"Center":g.preventDefault();if(jQuery("#sapUshellFloatingContainerWrapper:visible").length==1&&(g.originalEvent.srcElement.id)!=""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}break;default:}}});A.getElementsModel().createInspection("actions",[{fnCondition:function(i,I,T){return true;},fnAction:function(i,I,T){if((i&&i.length>0)||(I&&I.length>0)){if(I.indexOf("meAreaHeaderButton")===-1){T.addHeaderItem(["meAreaHeaderButton"],true);}}else{T.removeHeaderItem(["meAreaHeaderButton"],true);}}}],false,["blank-home","blank"]);this._createMeArea();b.on('showMeArea').do(s);sap.ui.getCore().getEventBus().publish("shell","meAreaCompLoaded",{delay:0});},_createMeArea:function(){if(this.bIsMeAreaCreated===true)return;this.bIsMeAreaCreated=true;this._createMeAreaProcess();},_createMeAreaProcess:function(){var t=this;if(this.oDefConfig.view){var m=sap.ui.view("meArea",{viewName:"sap.ushell.components.shell.MeArea.MeArea",type:'JS',viewData:this.oRenderer.getComponentData()});this._createActionButtons();this._setUserPrefModel();sap.ui.getCore().getEventBus().publish("launchpad","Settings");if(this.oDefConfig.view.position==="right"){this.oRenderer.addRightViewPort(m);}else{this.oRenderer.addLeftViewPort(m);}this.oRenderer.ViewPortContainerNavTo('leftViewPort',m.getId());this.oRenderer.ViewPortContainerAttachAfterSwitchStateAnimationFinished(function(D){if(D.getParameter("to")==="LeftCenter"&&!t.oSearchPrefs){setTimeout(function(){this._getSearchPrefs();}.bind(this),0);}}.bind(this));}sap.ui.getCore().getEventBus().subscribe("shell","meAreaButtonPress",function(s,e,M){t._switchToMeAreaView(M);t.oRenderer.addShellDanglingControl(M);});},toggleMeAreaView:function(m,s){if(!m||!m.getDomRef()){return;}if(m.getSelected()===!!s){return;}var M=A.getElementsModel().getModel(),e=M.getProperty('/currentState/stateName');this.oRenderer.setMeAreaSelected(!!s);if(e==='embedded'||e==='embedded-home'||e==='standalone'||e==='blank-home'||e==='blank'){this._showActionsInPopOver(m);}else{this._switchToMeAreaView(m);}var n=sap.ui.getCore().byId("NotificationsCountButton");if(n&&this.oRenderer.getNotificationsSelected()){n.setSelected(false);jQuery(n.getDomRef()).attr("aria-pressed","false");}},_createActionButtons:function(){var t=this,u=sap.ui.getCore().byId("userSettingsBtn"),o=sap.ui.getCore().byId("aboutBtn")||new sap.ushell.ui.footerbar.AboutButton("aboutBtn");if(!u){var i="userSettingsBtn",g=r.i18n.getText("userSettings"),h='sap-icon://action-settings';if(!this.oRenderer.getShellConfig().moveUserSettingsActionToShellHeader){u=new sap.ushell.ui.launchpad.ActionItem("userSettingsBtn",{id:i,text:g,icon:h});}}this.oRenderer.addShellDanglingControl(u);var H=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty("/enableHelp");var s=c.on("/core/extension/SupportTicket");s.do(function(e){if(!e){return;}s.off();var k=sap.ui.getCore().byId("ContactSupportBtn");if(!k){if(!t.oRenderer.getShellConfig().moveContactSupportActionToShellHeader){k=new a("ContactSupportBtn",{visible:false});c.on("/core/extension/SupportTicket").do(function(e){k.setVisible(e);});}}if(H){k.addStyleClass('help-id-contactSupportBtn');}t.oRenderer.addShellDanglingControl(k);});A.getElementsModel().getModel().setProperty('/showEndUserFeedback',false);var j=c.on("/core/extension/EndUserFeedback");j.do(function(k){if(!k){return;}j.off();try{sap.ushell.Container.getService("EndUserFeedback").isEnabled().done(function(){A.getElementsModel().getModel().setProperty('/showEndUserFeedback',true);}).fail(function(){A.getElementsModel().getModel().setProperty('/showEndUserFeedback',false);}).always(function(){var l;var m=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty('/showEndUserFeedback');if(m){var n=t.oRenderer.getEndUserFeedbackConfiguration();if(t.oRenderer.getShellConfig().moveGiveFeedbackActionToShellHeader){jQuery.sap.measure.start("FLP:Shell.controller._createActionButtons","create give feedback as shell head end item","FLP");var p=sap.ui.getCore().byId("EndUserFeedbackHandlerBtn");p.setModel(sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel());p.setShowAnonymous(n.showAnonymous);p.setAnonymousByDefault(n.anonymousByDefault);p.setShowLegalAgreement(n.showLegalAgreement);p.setShowCustomUIContent(n.showCustomUIContent);p.setFeedbackDialogTitle(n.feedbackDialogTitle);p.setTextAreaPlaceholder(n.textAreaPlaceholder);p.setAggregation("customUIContent",n.customUIContent,false);var q=function(){p.firePress();};l=sap.ui.getCore().byId("EndUserFeedbackBtn");l.setVisible(true);l.attachPress(q);jQuery.sap.measure.end("FLP:Shell.controller._createActionButtons");}else{l=sap.ui.getCore().byId("EndUserFeedbackBtn")||new E("EndUserFeedbackBtn",{showAnonymous:n.showAnonymous,anonymousByDefault:n.anonymousByDefault,showLegalAgreement:n.showLegalAgreement,showCustomUIContent:n.showCustomUIContent,feedbackDialogTitle:n.feedbackDialogTitle,textAreaPlaceholder:n.textAreaPlaceholder,customUIContent:n.customUIContent});}c.on("/core/extension/EndUserFeedback").do(function(k){l.setVisible(k);});if(H){l.addStyleClass('help-id-EndUserFeedbackBtn');}t.oRenderer.addShellDanglingControl(l);}});}catch(e){jQuery.sap.log.error("EndUserFeedback adapter is not found",e.message||e);A.getElementsModel().getModel().setProperty('/showEndUserFeedback',false);}});if(H){u.addStyleClass('help-id-loginDetails');o.addStyleClass('help-id-aboutBtn');}this.oRenderer.addShellDanglingControl(o);},_setUserPrefModel:function(){var u=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty("/userPreferences/entries");var D=this._getUserPrefDefaultModel();D.entries=D.entries.concat(u);D.entries=this.oRenderer.reorderUserPrefEntries(D.entries);sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().setProperty("/userPreferences",D);},_getUserPrefDefaultModel:function(){var m=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel(),u=sap.ushell.Container.getUser();var t=new G("userPrefThemeSelector","sap.ushell.components.shell.MeArea.ThemeSelector","xml","themes",r.i18n.getText("Appearance"),function(){var l=this.getView().getController().onSave();l.done(function(){if(m.getProperty("/tilesOpacity")===true){sap.ushell.utils.utils.handleTilesOpacity();}});return l;},undefined,undefined,undefined,function(){if(m.getProperty("/setTheme")!==undefined){return m.getProperty("/setTheme")&&u.isSetThemePermitted();}else{return u.isSetThemePermitted();}},m,"sap-icon://palette");var e=new G("userPrefUsageAnalyticsSelector","sap.ushell.components.shell.MeArea.UsageAnalyticsSelector","js","usageAnalytics",r.i18n.getText("usageAnalytics"),undefined,undefined,undefined,undefined,sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted());var g=new G("defaultParametersSelector","sap.ushell.components.shell.MeArea.DefaultParameters","js",undefined,r.i18n.getText("defaultsValuesEntry"),undefined,undefined,undefined,undefined,true,undefined,undefined,false);var h=new G("userProfilingView","sap.ushell.components.shell.MeArea.UserProfiling","js","userProfiling",r.i18n.getText("userProfiling"),undefined,undefined,undefined,undefined,false,m,"sap-icon://user-settings",false);var i=[new f(this.oRenderer),t,new L()],p=[];p.push(e);var o=window["sap-ushell-config"],j=jQuery.sap.getObject("renderers.fiori2.componentData.config.enableRecentActivity",undefined,o);if(j){i.push(new d());}i.push(h);if(m.getProperty("/enableNotifications")===true){var n=sap.ushell.Container.getService("Notifications")._getNotificationSettingsAvalability(),k;k=new G("notificationSettings","sap.ushell.components.shell.Notifications.Settings","js",undefined,r.i18n.getText("notificationSettingsEntry_title"),undefined,undefined,undefined,undefined,true,undefined,"sap-icon://ui-notifications",false);i.push(k);n.done(function(s){if(s.settingsAvailable){k.visible=true;m.getProperty("/userPreferences/entries").every(function(l,q){if(l.title===r.i18n.getText("notificationSettingsEntry_title")){m.setProperty("/userPreferences/entries/"+q+"/visible",true);return false;}return true;});}});}if(m.getProperty("/userDefaultParameters")){i.push(g);}return{dialogTitle:r.i18n.getText("userSettings"),isDetailedEntryMode:false,activeEntryPath:null,entries:i,profiling:p};},_showActionsInPopOver:function(o){var m=A.getElementsModel().getModel(),e=m.getProperty('/currentState/actions');if(!this.oActionsPopover){this.oActionsLayout=new sap.ui.layout.VerticalLayout();this.oActionsPopover=new sap.m.Popover("sapUshellActionsPopover",{showHeader:false,placement:sap.m.PlacementType.Bottom,content:this.oActionsLayout}).addStyleClass("sapUshellPopupContainer");}this.oActionsLayout.removeAllContent();this._createActionButtons();e.forEach(function(s,i){var g=sap.ui.getCore().byId(s);if(g&&g.setActionType){this.oActionsLayout.addContent(g);g.setActionType('standard');g.addStyleClass('sapUshellStandardActionItem');}}.bind(this));this.oActionsPopover.openBy(o);this.oActionsPopover.setModel(m);},_switchToMeAreaView:function(o){var B=o.getSelected();if(B){this.oRenderer.switchViewPortStateByControl(o,"Center");}else{this.oRenderer.switchViewPortStateByControl(o,"LeftCenter");}if(this.oRenderer.toggleOverFlowActions){this.oRenderer.toggleOverFlowActions();}},_getSearchPrefs:function(){var t=this;if(this._getIsSearchButtonEnabled()){sap.ui.require(['sap/ushell/renderers/fiori2/search/userpref/SearchPrefs','sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader'],function(S){t.oSearchPrefs=true;var e=S;var s=e.getEntry();s.isSearchPrefsActive().done(function(i){if(!i){return;}t.oRenderer.addUserProfilingEntry(s);}.bind(this));}.bind(this));}},_getIsSearchButtonEnabled:function(){var m=A.getElementsModel().getModel();try{var e=m.getProperty("/currentState/stateName");var D=m.getData();var s=D.states;if(s[e].headEndItems.indexOf("sf")!=-1){return true;}else{return false;}}catch(g){jQuery.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: search button is not visible.");return false;}},_getPersonalizer:function(i){if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization");var o=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};this.oPersonalizer=p.getPersonalizer(P,s,o);return this.oPersonalizer;},exit:function(){}});function G(v,e,g,h,t,o,i,j,k,l,m,n,p){this.view=null;this.getView=function(){if(!this.view||!sap.ui.getCore().byId(v)){if(g==="xml"){this.view=sap.ui.xmlview(v,e);}else{this.view=sap.ui.jsview(v,e);}}if(m){this.view.setModel(m);}return this.view;};return{entryHelpID:h,title:t,valueResult:null,onSave:o?o.bind(this):function(){if(this.getView().getController().onSave){return this.getView().getController().onSave();}return;}.bind(this),onCancel:i?i.bind(this):function(){if(this.getView().getController().onCancel){return this.getView().getController().onCancel();}return;}.bind(this),contentFunc:j?j.bind(this):function(){if(this.getView().getController().getContent){return this.getView().getController().getContent();}return;}.bind(this),valueArgument:k?k.bind(this):function(){var q=jQuery.Deferred(),s=this;setTimeout(function(){if(s.getView().getController().getValue){s.getView().getController().getValue().done(function(u){q.resolve(u);});}},0);return q.promise();}.bind(this),editable:typeof l==="function"?l():l,contentResult:null,icon:n,defaultVisibility:p};}function L(){this.view=null;this.getView=function getView(){if(!this.languageRegionSelector){this.languageRegionSelector=sap.ui.jsview("languageRegionSelector","sap.ushell.components.shell.MeArea.LanguageRegionSelector");}return this.languageRegionSelector;};var o=function(){var i=this.getView().getController().onSave();return i;}.bind(this);var e=function(){return this.getView().getController().onCancel();}.bind(this);var g=function(){return this.getView().getController().getContent();}.bind(this);var h=function(){return this.getView().getController().getValue();}.bind(this);return{entryHelpID:"language",title:r.i18n.getText("languageRegionTit"),editable:true,valueArgument:h,valueResult:null,onSave:o,onCancel:e,contentFunc:g,contentResult:null,icon:"sap-icon://globe"};}function d(){this.view=null;this.getView=function getView(){if(!this.userActivitiesHandler){this.userActivitiesHandler=sap.ui.jsview("userActivitiesHandler","sap.ushell.components.shell.MeArea.userActivitiesHandler");}return this.userActivitiesHandler;};var o=function(){var i=this.getView().getController().onSave();return i;}.bind(this);var e=function(){return this.getView().getController().onCancel();}.bind(this);var g=function(){return this.getView().getController().getContent();}.bind(this);var h=function(){return this.getView().getController().getValue();}.bind(this);return{entryHelpID:"UserActivitiesEntry",title:r.i18n.getText("userActivities"),editable:true,valueArgument:h,valueResult:null,onSave:o,onCancel:e,contentFunc:g,contentResult:null,icon:"sap-icon://laptop"};}function f(R){this.view=null;this.oRenderer=R;this.getView=function getView(){if(!this.userAccountSelector){if((this.oRenderer.getShellConfig().enableOnlineStatus&&sap.ushell.ui5service.UserStatus.prototype.isEnabled)||this.oRenderer.getShellConfig().enableUserImgConsent){this.userAccountSelector=sap.ui.xmlview("UserAccountSelector","sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector");}else{this.userAccountSelector=sap.ui.xmlview("UserAccountSetting","sap.ushell.components.shell.MeArea.userAccount.UserAccountSetting");}}return this.userAccountSelector;};var o=function(){var i=this.getView().getController().onSave();return i;}.bind(this);var e=function(){return this.getView().getController().onCancel();}.bind(this);var g=function(){return this.getView().getController().getContent();}.bind(this);var h=function(){return this.getView().getController().getValue();}.bind(this);return{entryHelpID:"userAccountEntry",title:r.i18n.getText("UserAccountFld"),editable:true,valueArgument:h,valueResult:null,onSave:o,onCancel:e,contentFunc:g,contentResult:null,icon:"sap-icon://account"};}});},"sap/ushell/components/shell/MeArea/DefaultParameters.controller.js":function(){sap.ui.define(["sap/ui/comp/smartform/SmartForm","sap/ui/model/odata/ODataModel","sap/ui/comp/smartfield/SmartField","sap/ui/comp/valuehelpdialog/ValueHelpDialog"],function(S,O,a,V){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.DefaultParameters",{onInit:function(){this.oModelRecords={};this.oChangedParameters={};this.oBlockedParameters={};this.aDisplayedUserDefaults=[];this.DefaultParametersService=sap.ushell.Container.getService("UserDefaultParameters");},applyFocus:function(){var t=this;setTimeout(function(){if(!sap.ui.Device.phone){var e=jQuery.sap.byId(t.getView().getId()).firstFocusableDomRef();if(e){jQuery.sap.focus(e);}}},1);},overrideOdataModelValue:function(e){var u=e.getParameter('url'),m=e.getSource(),f,F,t=this;this.aDisplayedUserDefaults.forEach(function(r){if(r.editorMetadata&&r.editorMetadata.editorInfo){F=r.editorMetadata.editorInfo.odataURL+r.editorMetadata.editorInfo.bindingPath;if(F===u){f=r.editorMetadata.editorInfo.bindingPath+"/"+r.editorMetadata.editorInfo.propertyName;if(m.getProperty(f)!==r.valueObject.value){m.setProperty(f,r.valueObject.value);}t.oBlockedParameters[r.parameterName]=false;}}});},getOrCreateModelForODataService:function(u){if(!this.oModelRecords[u]){var p={metadataUrlParams:{"sap-documentation":"heading,quickinfo","sap-value-list":"none"},json:true};var m=new sap.ui.model.odata.ODataModel(u,p);m.setDefaultCountMode("None");m.setDefaultBindingMode("TwoWay");m.attachRequestCompleted(this.overrideOdataModelValue.bind(this));this.oModelRecords[u]=m;}return this.oModelRecords[u];},constructControlSet:function(p){var u=[];for(var P in p){for(var n=0;n<u.length;n++){if(u[n].parameterName===P){u.splice(n,1);}}p[P].parameterName=P;u.push(p[P]);}this.sortParametersByGroupIdParameterIndex(u);this.aDisplayedUserDefaults=u;this.sForm=new S({editable:true}).addStyleClass("sapUshellShellDefaultValuesForm");this.getView().addContent(this.sForm);},getValue:function(){var d=jQuery.Deferred();var h=sap.ushell.Container.getService("UserDefaultParameters").hasRelevantMaintainableParameters();h.done(function(H){d.resolve({value:H?1:0,displayText:" "});});h.fail(function(e){d.reject(e);});return d.promise();},createPlainModel:function(g,r){r.modelBind.model=this.oMdlParameter;r.modelBind.extendedModel=this.oMdlParameter;g.setModel(r.modelBind.model);var m="/sUserDef_"+r.nr+"_";r.modelBind.sFullPropertyPath=m;r.modelBind.sPropertyName="{"+m+"}";r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);},revertToPlainModelControls:function(g,r){jQuery.sap.log.error("Metadata loading for parameter "+r.parameterName+" failed"+JSON.stringify(r.editorMetadata));r.modelBind.isOdata=false;this.createPlainModel(g,r);this.createAppropriateControl(g,r);},getContent:function(){var t=this;var d=new jQuery.Deferred();this.DefaultParametersService.editorGetParameters().done(function(p){t.oMdlParameter=new sap.ui.model.json.JSONModel(p);t.oMdlParameter.setDefaultBindingMode("TwoWay");t.getView().setModel(t.oMdlParameter,"MdlParameter");t.oOriginalParameters=jQuery.extend(true,{},p);t.oCurrentParameters=jQuery.extend(true,{},p);t.constructControlSet(p);var l="nevermore";var g;t.aChangedParameters=[];t.oBindingContexts={};t.setPropValue=function(r){r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);t.oBlockedParameters[r.parameterName]=false;};t.oMdlParameter.setProperty("/sUser");for(var i=0;i<t.aDisplayedUserDefaults.length;++i){var r=t.aDisplayedUserDefaults[i];r.nr=i;r.editorMetadata=r.editorMetadata||{};r.valueObject=r.valueObject||{value:""};var b=new sap.ui.comp.smartform.GroupElement({});if(l!=r.editorMetadata.groupId){var c=r.editorMetadata.groupTitle||undefined;g=new sap.ui.comp.smartform.Group({label:c,"editable":true});l=r.editorMetadata.groupId;t.sForm.addGroup(g);}g.addGroupElement(b);r.modelBind={model:undefined,sModelPath:undefined,sPropertyName:undefined,sFullPropertyPath:undefined};r.valueObject.value=r.valueObject.value||"";if(r.editorMetadata.editorInfo&&r.editorMetadata.editorInfo.propertyName){r.modelBind.isOdata=true;var u=r.editorMetadata.editorInfo.odataURL;r.modelBind.model=t.getOrCreateModelForODataService(u);b.setModel(r.modelBind.model);if(!t.oBindingContexts[u]){b.bindElement(r.editorMetadata.editorInfo.bindingPath);t.oBindingContexts[u]=r.modelBind.model.getContext(r.editorMetadata.editorInfo.bindingPath);}else{b.setBindingContext(t.oBindingContexts[u]);}r.modelBind.sPropertyName="{"+r.editorMetadata.editorInfo.propertyName+"}";r.modelBind.sFullPropertyPath=r.editorMetadata.editorInfo.bindingPath+"/"+r.editorMetadata.editorInfo.propertyName;r.modelBind.extendedModel=t.oMdlParameter;}else{t.createPlainModel(b,r);}r.valueObject.value=r.valueObject.value||"";r.modelBind.model.setProperty(r.modelBind.sFullPropertyPath,r.valueObject.value);if(r.modelBind.isOdata){t.oBlockedParameters[r.parameterName]=true;r.modelBind.model.attachMetadataLoaded(t.createAppropriateControl.bind(t,b,r));r.modelBind.model.attachMetadataFailed(t.revertToPlainModelControls.bind(t,b,r));}else{t.createAppropriateControl(b,r);}r.modelBind.model.bindTree(r.modelBind.sFullPropertyPath).attachChange(t.storeChangedData.bind(t));}t.oMdlParameter.bindTree("/").attachChange(t.storeChangedData.bind(t));d.resolve(t.getView());});return d.promise();},createAppropriateControl:function(g,r){var s,l,e,b;if(r.editorMetadata.extendedUsage){var t=this;e=new sap.m.Button({text:sap.ushell.resources.i18n.getText("userDefaultsExtendedParametersTitle"),tooltip:sap.ushell.resources.i18n.getText("userDefaultsExtendedParametersTooltip"),type:{parts:['MdlParameter>/'+r.parameterName+'/valueObject/extendedValue/Ranges'],formatter:function(R){return R&&R.length?sap.m.ButtonType.Emphasized:sap.m.ButtonType.Transparent;}},press:function(o){t.openExtendedValueDialog(o,r);}}).addStyleClass('sapUshellExtendedDefaultParamsButton');}jQuery.sap.log.debug("Creating controls for parameter"+r.parameterName+" type "+r.modelBind.isOdata);var E=g.getElements().slice();E.forEach(function(o){g.removeElement(o);});var f=g.getFields().slice();f.forEach(function(o){g.removeField(o);});l=new sap.ui.comp.smartfield.SmartLabel({width:sap.ui.Device.system.phone?"auto":"12rem",textAlign:sap.ui.Device.system.phone?'Left':'Right'});if(r.modelBind.isOdata&&r.editorMetadata.editorInfo){s=new a({value:r.modelBind.sPropertyName,name:r.parameterName});s.attachInnerControlsCreated({},this.applyFocus,this);l.setLabelFor(s);}else{s=new sap.m.Input({name:r.parameterName,value:r.modelBind.sPropertyName,type:"Text"});this.setPropValue(r);l.setText((r.editorMetadata.displayText||r.parameterName)+":");l.setTooltip(r.editorMetadata.description||r.parameterName);}s.attachChange(this.storeChangedData.bind(this));s.addStyleClass("sapUshellDefaultValuesSmartField");s.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));var i=new sap.m.FlexBox({width:sap.ui.Device.system.phone?'100%':'auto',direction:(sap.ui.Device.system.phone&&!e)?'Column':'Row',items:[s,e]});l.setLayoutData(new sap.m.FlexItemData({shrinkFactor:0}));b=new sap.m.FlexBox({alignItems:sap.ui.Device.system.phone?'Start':'Center',direction:sap.ui.Device.system.phone?'Column':'Row',items:[l,i]});g.addElement(b);},openExtendedValueDialog:function(e,d){var t=this,p='/'+d.parameterName+'/valueObject/extendedValue/Ranges',m=d.modelBind.extendedModel,r=m.getProperty(p)||[],l,n;if(d.modelBind.isOdata){n=this._getMetadataNameSpace(d.editorMetadata.editorInfo.odataURL);var E=d.modelBind.model.getMetaModel().getODataEntityType(n+"."+d.editorMetadata.editorInfo.entityName);if(E){l=d.modelBind.model.getMetaModel().getODataProperty(E,d.editorMetadata.editorInfo.propertyName)["sap:label"];}}var v=new V({basicSearchText:d.editorMetadata.displayText||l||d.parameterName,title:d.editorMetadata.displayText||l||d.parameterName,supportRanges:true,supportRangesOnly:true,key:d.modelBind.sPropertyName,displayFormat:"UpperCase",descriptionKey:d.editorMetadata.displayText||l||d.parameterName,filterMode:true,stretch:sap.ui.Device.system.phone,ok:function(c){t.saveExtendedValue(c,d,m,v);},cancel:function(c){v.close();},afterClose:function(){v.destroy();}});v.setIncludeRangeOperations(this.getListOfSupportedRangeOperations());this.addTokensToValueHelpDialog(v,r,d.parameterName);var k=[];k.push({label:v.getTitle(),key:d.parameterName});v.setRangeKeyFields(k);v.open();},saveExtendedValue:function(c,d,m,v){this.aTokens=c.getParameters().tokens;var t=[],p='/'+d.parameterName+'/valueObject/extendedValue/Ranges',f,b={extendedValue:{"Ranges":[]}};jQuery.extend(this.oCurrentParameters[d.parameterName].valueObject,b);for(var e in this.aTokens){if(this.aTokens.hasOwnProperty(e)){t.push(this.aTokens[e].data("range"));}}f=t.map(function(e){return{Sign:e.exclude?'E':'I',Option:e.operation!=="Contains"?e.operation:"CP",Low:e.value1,High:e.value2||null};});if(!m.getProperty('/'+d.parameterName+'/valueObject/extendedValue')){m.setProperty('/'+d.parameterName+'/valueObject/extendedValue',{});}m.setProperty(p,f);this.oChangedParameters[d.parameterName]=true;v.close();},getListOfSupportedRangeOperations:function(){var s=Object.keys(sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation);return s.filter(function(o){return o!=="StartsWith"&&o!=='EndsWith'&&o!=='Initial';});},_getMetadataNameSpace:function(s){var b=s.split("/"),n;n=b[b.length-1];return n;},addTokensToValueHelpDialog:function(d,r,p){var t=[],f;r.forEach(function(R){if(R){f={};f.exclude=R.Sign==='E';f.keyField=p;f.operation=R.Option!=="CP"?R.Option:"Contains";f.value1=R.Low;f.value2=R.High;t.push(new sap.m.Token({}).data("range",f));}});d.setTokens(t);},sortParametersByGroupIdParameterIndex:function(u){function c(d,D){if(!(D.editorMetadata&&D.editorMetadata.groupId)){return-1;}if(!(d.editorMetadata&&d.editorMetadata.groupId)){return 1;}if(d.editorMetadata.groupId<D.editorMetadata.groupId){return-1;}if(d.editorMetadata.groupId>D.editorMetadata.groupId){return 1;}return 0;}function b(d,D){if(!(D.editorMetadata&&D.editorMetadata.parameterIndex)){return-1;}if(!(d.editorMetadata&&d.editorMetadata.parameterIndex)){return 1;}return d.editorMetadata.parameterIndex-D.editorMetadata.parameterIndex;}u.sort(function(d,D){var r=c(d,D);if(r===0){return b(d,D);}return r;});},storeChangedData:function(){var i=0,t=this,b=t.aDisplayedUserDefaults;for(i=0;i<b.length;++i){var p=b[i].parameterName;if(!t.oBlockedParameters[p]){var o={value:t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.value,extendedValue:t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.extendedValue&&t.oCurrentParameters[p].valueObject.extendedValue};if(b[i].modelBind&&b[i].modelBind.model){var m=b[i].modelBind.model;var M=b[i].modelBind.extendedModel;var P=b[i].modelBind.sFullPropertyPath;var A=m.getProperty(P);var n={value:m.getProperty(P),extendedValue:M.getProperty('/'+p+'/valueObject/extendedValue')};if(this.isValueDifferent(n,o)){t.oCurrentParameters[p].valueObject.value=A;if(n.extendedValue){jQuery.extend(t.oCurrentParameters[p].valueObject.extendedValue,n.extendedValue);}t.oChangedParameters[p]=true;}}}}},onCancel:function(){if(sap.ui.getCore().byId("saveButton")){sap.ui.getCore().byId("saveButton").setEnabled(true);}},isValueDifferent:function(v,o){var i=false,s=v?JSON.stringify(v):v,b=o?JSON.stringify(o):o,e,E;if(s===b){return false;}if(v===undefined){return false;}if(o===undefined){return false;}e=v.extendedValue?JSON.stringify(v.extendedValue):v.extendedValue;E=o.extendedValue?JSON.stringify(o.extendedValue):o.extendedValue;if((v.value===""&&o.value===undefined)||(o.value===""&&v.value===undefined)){i=true;}if(i&&(e===E)){return false;}return(!i&&(v.value!==o.value))||(e!==E);},onSave:function(){var t=this,d=new jQuery.Deferred(),i,c=Object.keys(this.oChangedParameters).sort(),s,p;for(i=0;i<c.length;i++){p=c[i];if(this.isValueDifferent(this.oOriginalParameters[p].valueObject,this.oCurrentParameters[p].valueObject)){if((this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value===null)||(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value==="")){this.oCurrentParameters[p].valueObject.value=undefined;}if(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.extendedValue&&jQuery.isArray(this.oCurrentParameters[p].valueObject.extendedValue.Ranges)&&(this.oCurrentParameters[p].valueObject.extendedValue.Ranges.length===0)){this.oCurrentParameters[p].valueObject.extendedValue=undefined;}s=sap.ushell.Container.getService("UserDefaultParameters").editorSetValue(p,this.oCurrentParameters[p].valueObject);s.done(function(P){t.oChangedParameters={};t.oOriginalParameters[P].valueObject.value=t.oCurrentParameters[P].valueObject.value;d.resolve();});s.fail(d.reject);}}return d.promise();}});},false);},"sap/ushell/components/shell/MeArea/DefaultParameters.view.js":function(){sap.ui.define([],function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.DefaultParameters",{createContent:function(c){},getControllerName:function(){return"sap.ushell.components.shell.MeArea.DefaultParameters";}});},false);},"sap/ushell/components/shell/MeArea/LanguageRegionSelector.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.LanguageRegionSelector",{onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.bIsSetLanguage=sap.ushell.Container.getRenderer('fiori2').getModelConfiguration().enableSetLanguage;this.isLanguageChanged=false;this.isLanguagePersonalized=this.oUser.isLanguagePersonalized();this.sLanguage=this._getFormatedLanguage(this.oUser.getLanguage());this.aLanguageList=null;var m=new sap.ui.model.json.JSONModel();var a={languageList:[{text:this.sLanguage,key:this.sLanguage}],selectedLanguage:this.sLanguage};var l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var L=sap.ui.core.LocaleData.getInstance(l);var d=L.getDatePattern("medium"),t=L.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";a.datePatternList=[{text:d,key:d}];a.timeFormat=T;a.selectedDatePattern=d;var h=this.oView.hourFormatSegmentedButton.getButtons();var s=(T==="12h")?h[0]:h[1];this.oView.hourFormatSegmentedButton.setSelectedButton(s);m.setData(a);this.oView.setModel(m);},getContent:function(){var d=jQuery.Deferred();var t=this;if(this.bIsSetLanguage){jQuery.sap.measure.start("FLP:LanguageRegionSelector.getContent","getContent","FLP");var a=this._getLanguagesList();a.done(function(l){if(l){if(l.length>1){if(!t.isLanguagePersonalized){t.getView().getModel().setProperty("/selectedLanguage","default");}else{t.getView().getModel().setProperty("/selectedLanguage",t.oUser.getLanguage());}t.getView().getModel().setSizeLimit(l.length);t.getView().getModel().setProperty("/languageList",l);t.oView.inputLanguage.setVisible(false);t.oView.selectLanguage.setVisible(true);t.oView.helpingText.setVisible(true);t.oView.helpingTextLabel.setVisible(true);}}jQuery.sap.measure.end("FLP:LanguageRegionSelector.getContent");d.resolve(t.getView());});a.fail(function(e){jQuery.sap.log.error(e);d.resolve(t.getView());});}else{d.resolve(t.getView());}return d.promise();},getValue:function(){var d=jQuery.Deferred();var s=this.getView().getModel().getProperty("/selectedLanguage");var u=this.oUser.getLanguage();if(s=="default"){d.resolve(this._getFormatedLanguage(u)+" | "+sap.ushell.resources.i18n.getText("timeFormatFld")+": "+this.getView().getModel().getProperty("/timeFormat"));}else{d.resolve(this._getFormatedLanguage(s)+" | "+sap.ushell.resources.i18n.getText("timeFormatFld")+": "+this.getView().getModel().getProperty("/timeFormat"));}return d.promise();},onCancel:function(){var d=jQuery.Deferred();if(this.bIsSetLanguage){this.isLanguageChanged=false;var s=this.getView().getModel().getProperty("/selectedLanguage");if(!this.isLanguagePersonalized||this.oUser.getLanguage()!=s){this._handleSelectChange(this.oUser.getLanguage(),"Cancel");d.resolve();}else{d.resolve();}}else{d.resolve();}return d.promise();},onSave:function(){var d=jQuery.Deferred();var o;var s=this.getView().getModel().getProperty("/selectedLanguage");if(this.isLanguageChanged){if(s){o=this.oUser.getLanguage();this.oUser.setLanguage(s);this.userInfoService.updateUserPreferences(this.oUser).done(function(){d.resolve();window.location.reload();}.bind(this)).fail(function(e){this.oUser.setLanguage(o);this._handleSelectChange(o,"Cancel");jQuery.sap.log.error(e);d.reject(e);}.bind(this));}}else{d.resolve();}return d.promise();},_getFormatedLanguage:function(l){if(l&&l.indexOf('-')>-1){l=l.replace('-',' (').concat(')').toUpperCase();}else if(l){l=l.toUpperCase();}return l;},_handleSelectChange:function(l,m){var L=new sap.ui.core.Locale(l);var o=sap.ui.core.LocaleData.getInstance(L);var d=o.getDatePattern("medium"),t=o.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";this.isLanguageChanged=true;if(m=="Cancel"){if(!this.isLanguagePersonalized){this.getView().selectLanguage.setSelectedKey("default");}else{this.getView().selectLanguage.setSelectedKey(l);}this.isLanguageChanged=false;}this.getView().comboDate.setValue(d);var h=this.getView().hourFormatSegmentedButton.getButtons();var s=(T==="12h")?h[0]:h[1];this.getView().hourFormatSegmentedButton.setSelectedButton(s);},_getLanguagesList:function(){var r=jQuery.Deferred();if(this.aLanguageList==null){jQuery.sap.measure.start("FLP:LanguageRegionSelector._getLanguagesList","_getLanguagesList","FLP");var g=this.userInfoService.getLanguageList();g.done(function(d){jQuery.sap.measure.end("FLP:LanguageRegionSelector._getLanguagesList");r.resolve(d);});g.fail(function(){r.reject("Failed to load language list.");});}else{r.resolve(this.aLanguageList);}return r.promise();}});},false);},"sap/ushell/components/shell/MeArea/LanguageRegionSelector.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.LanguageRegionSelector",{createContent:function(c){var i=new sap.ui.core.Item({text:"{text}",key:"{key}"});var a=sap.ushell.resources.i18n;var f=sap.ui.Device.system.phone?'Column':'Row';var F=sap.ui.Device.system.phone?'Stretch':'Center';var t=sap.ui.Device.system.phone?'Left':'Right';var l=sap.ui.Device.system.phone?"auto":"12rem";var L=sap.ui.Device.system.phone?"auto":"16rem";var C=sap.ui.Device.system.phone?"100%":undefined;var b=new sap.m.Label('languageSelectionLabel',{text:{path:"/selectedLanguage",formatter:function(s){s=c._getFormatedLanguage(s);return a.getText(s.indexOf('(')>-1?"languageAndRegionTit":"languageRegionFld")+':';}},width:l,textAlign:t});this.selectLanguage=new sap.m.Select('languageSelectionSelect',{visible:false,width:L,items:{path:"/languageList",template:i},selectedKey:"{/selectedLanguage}",editable:true,change:function(e){var s=e.getParameters().selectedItem.getKey();c._handleSelectChange(s);}}).addAriaLabelledBy(b);this.inputLanguage=new sap.m.Input('languageSelectionInput',{visible:true,value:"{/selectedLanguage}",editable:false}).addAriaLabelledBy(b);var d=new sap.m.FlexBox({alignItems:F,direction:f,items:[b,this.selectLanguage,this.inputLanguage]});this.helpingTextLabel=new sap.m.Label({visible:false,text:"",width:l,textAlign:t});this.helpingText=new sap.m.Text({visible:false,text:a.getText("LanguageAndRegionHelpingText"),width:L,textAlign:"Begin"}).addStyleClass("sapUshellFlpSettingsLanguageRegionDescription");var g=new sap.m.FlexBox({alignItems:F,direction:f,items:[this.helpingTextLabel,this.helpingText]});var h=new sap.m.Label({text:a.getText("dateFormatFld")+":",width:l,textAlign:t});this.comboDate=new sap.m.ComboBox('dateFormatCombo',{width:C,items:{path:"/datePatternList",template:i},selectedKey:"{/selectedDatePattern}",editable:false}).addAriaLabelledBy(h);var j=new sap.m.FlexBox({alignItems:F,direction:f,items:[h,this.comboDate]});this.hourFormatSegmentedButton=new sap.m.SegmentedButton('hoursSegmentedButton',{enabled:false,width:"10rem",buttons:[new sap.m.Button({text:a.getText("btn12h")}),new sap.m.Button({text:a.getText("btn24h")})]});var k=new sap.m.FlexBox({alignItems:F,direction:f,items:[new sap.m.Label({text:a.getText("timeFormatFld")+":",width:l,textAlign:t}),this.hourFormatSegmentedButton]});k.addStyleClass("sapUshellFlpSettingsLanguageRegionHourFormatFBox");var v=new sap.m.VBox({items:[d,g,j,k]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.LanguageRegionSelector";}});},false);},"sap/ushell/components/shell/MeArea/MeArea.controller.js":function(){sap.ui.define(["sap/ushell/resources","sap/m/Button","sap/m/ButtonType"],function(r,B,a){"use strict";var m=new sap.ui.model.json.JSONModel({actions:[],userPreferences:{entries:[]},apps:{recentActivities:[],frequentActivities:[]}});sap.ui.controller("sap.ushell.components.shell.MeArea.MeArea",{onInit:function(){var c=(this.getView().getViewData()?this.getView().getViewData().config:{})||{};this.aControlsWithPressHandler=[];this.getView().setModel(m,"meAreaModel");this._addActionItemToOverflowSupport();this.oResourceBundle=r.i18n;if(c.enableRecentActivity&&sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty("/enableTrackingActivity")){this.oUserRecentsSrvc=sap.ushell.Container.getService('UserRecents');}this.lastVisited=null;},onBeforeRendering:function(){if(this.oUserRecentsSrvc){if(!m.getProperty('/apps/recentActivities')||!m.getProperty('/apps/recentActivities').length){this.refreshRecentActivities();}}if(!m.getProperty('/apps/frequentActivities')||!m.getProperty('/apps/frequentActivities').length){this.refreshFrequentActivities();}},refreshRecentActivities:function(){if(this.oUserRecentsSrvc){this.oUserRecentsSrvc.getRecentActivity().done(function(A){A.forEach(function(i){i.timestamp=sap.ushell.utils.formatDate(i.timestamp);});m.setProperty('/apps/recentActivities',A);});}},refreshFrequentActivities:function(){if(this.oUserRecentsSrvc){this.oUserRecentsSrvc.getFrequentActivity().done(function(A){m.setProperty('/apps/frequentActivities',A);});}},createViewByName:function(e,n,v){var V=v?sap.ui.getCore().byId(v):null;if(!V){var s=e.getSource(),c=s.getBindingContext(),p=c?c.getPath():"",b=n||c.getModel().getProperty(p+"/viewName");v=v||c.getModel().getProperty(p+"/id");V=sap.ui.view(v,{viewName:b,type:'JS',viewData:{}});}return V;},getSettingsDialogContent:function(){var s=sap.ui.getCore().byId("userSettings");if(!s){s=sap.ui.view("userSettings",{viewName:"sap.ushell.components.shell.MeArea.UserSettings",type:'JS',viewData:this.getView().getViewData()});}s.setModel(this.getView().getModel());return s;},logout:function(){sap.ui.require(['sap/m/MessageBox'],function(M){var l=new sap.ushell.ui.launchpad.LoadingDialog({text:""}),s=true,i=false,L={};sap.ushell.Container.getGlobalDirty().done(function(d){s=false;if(i===true){l.exit();l=new sap.ushell.ui.launchpad.LoadingDialog({text:""});}var _=function(d){var L={},R=r.i18n;if(d===sap.ushell.Container.DirtyState.DIRTY){L.message=R.getText('unsaved_data_warning_popup_message');L.icon=M.Icon.WARNING;L.messageTitle=R.getText("unsaved_data_warning_popup_title");}else{L.message=R.getText('signoutConfirmationMsg');L.icon=M.Icon.QUESTION;L.messageTitle=R.getText("signoutMsgTitle");}return L;};L=_(d);M.show(L.message,L.icon,L.messageTitle,[M.Action.OK,M.Action.CANCEL],function(A){if(A===M.Action.OK){l.openLoadingScreen();l.showAppInfo(r.i18n.getText('beforeLogoutMsg'),null);sap.ushell.Container.logout();}},sap.ui.core.ElementMetadata.uid("confirm"));});if(s===true){l.openLoadingScreen();i=true;}});},_addPressHandlerToActions:function(c){var t=this;if(this.aControlsWithPressHandler.indexOf(c.getId())===-1){this.aControlsWithPressHandler.push(c.getId());c.attachPress(function(e){sap.ui.getCore().byId("viewPortContainer").switchState("Center");if(c.getId()==="userSettingsBtn"){var h=e.mParameters?e.mParameters.hotkeys:undefined;t.hotkeysParam=h;var T=t;if(!T.getView().oSettingsDialog.getModel()){T.getView().oSettingsDialog.setModel(T.getView().getModel());}var o=function(){T.getView().oSettingsDialog.open();sap.ui.getCore().byId("viewPortContainer").detachAfterSwitchStateAnimationFinished(o);};if(T.hotkeysParam){T.getView().oSettingsDialog.open();}else{var C=T.oView.getModel().getProperty('/currentState/stateName');if(C==='embedded'||C==='embedded-home'||C==='standalone'||C==='blank-home'||C==='blank'){T.getView().oSettingsDialog.open();}else{sap.ui.getCore().byId("viewPortContainer").attachAfterSwitchStateAnimationFinished(o);}}}});}},_getControlsWithPressHandler:function(){return this.aControlsWithPressHandler;},_addActionItemToOverflowSupport:function(){if(sap.m._overflowToolbarHelpers&&sap.m._overflowToolbarHelpers.OverflowToolbarAssociativePopoverControls._mSupportedControls){var s=sap.m._overflowToolbarHelpers.OverflowToolbarAssociativePopoverControls._mSupportedControls;var p=sap.m._overflowToolbarHelpers.OverflowToolbarAssociativePopoverControls.prototype;var c=["sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.EndUserFeedback","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.m.Button"];var C=function(n){return n.substring(0,1).toUpperCase()+n.substring(1);};var S={canOverflow:true,listenForEvents:["press"],noInvalidationProps:["enabled","type"]};var P=function(o){if(!o.mCustomStyleClassMap.sapUshellActionItem){return;}if(o.setActionType){o.setActionType('standard');}var t=o.getType();if(t!==a.Accept&&t!==a.Reject){o.setType(a.Transparent);}if(o.getIcon()){o.addStyleClass("sapMOTAPButtonWithIcon");}else{o.addStyleClass("sapMOTAPButtonNoIcon");}};var f=function(o){if(o.setActionType){o.setActionType('action');}};c.forEach(function(n){s[n]=S;var b=n.split(".").map(C).join("");var d='_preProcess';var e='_postProcess';p[d+b]=P;p[e+b]=f;});}},setLastVisited:function(u){this.lastVisited=u;},updateScrollBar:function(h){if(this.lastVisited&&this.lastVisited!="#"+h){jQuery('.sapUshellViewPortLeft').scrollTop(0);sap.ui.getCore().byId('meAreaIconTabBar').setSelectedKey("sapUshellIconTabBarrecentActivities");var l=sap.ui.getCore().byId('sapUshellActivityListrecentActivities'),L=l.getItems();if(L&&L.length>0){sap.ui.getCore().byId('sapUshellActivityListrecentActivities').setSelectedItem(L[0],true);}this.lastVisited=null;}},_saveUserPrefEntries:function(){var e=this.getView().getModel().getProperty("/userPreferences/entries");var b=jQuery.Deferred();var w;var c;var t=0;var f=0;var s=0;var p=[];var d=[];var g;var h=function(){s++;b.notify();};var j=function(k){d.push({entry:g,message:k});f++;b.notify();};for(var i=0;i<e.length;i++){if(e[i]&&e[i].isDirty===true){c=e[i].onSave();c.done(h);g=e[i].title;c.fail(j);p.push(c);t++;}}w=jQuery.when.apply(null,p);w.done(function(){b.resolve();});b.progress(function(){if(f>0&&(f+s===t)){b.reject(d);}});return b.promise();},_saveButtonHandler:function(){var s;s=this._saveUserPrefEntries();var t=this;var i=this.getView().getModel().getProperty("/userPreferences/isDetailedEntryMode");if(i){this.getView().getModel().setProperty("/userPreferences/activeEntryPath",null);}s.done(function(){t._showSaveMessageToast();});s.fail(function(f){sap.ui.require(["sap/m/MessageBox"],function(M){var e;var b="";if(f.length===1){e=t.translationBundle.getText("savingEntryError")+" ";}else{e=t.translationBundle.getText("savingEntriesError")+"\n";}f.forEach(function(c){e+=c.entry+"\n";b+="Entry: "+c.entry+" - Error message: "+c.message+"\n";});M.show(e,{icon:M.Icon.ERROR,title:t.translationBundle.getText("Error"),actions:[M.Action.OK]});jQuery.sap.log.error("Failed to save the following entries",b,"sap.ushell.ui.footerbar.UserPreferencesButton");});});},_showSaveMessageToast:function(){sap.ui.require(["sap/m/MessageToast"],function(M){var b=r.i18n.getText("savedChanges");M.show(b,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});},createSaveButton:function(){var t=this;return new B({id:"userSettingSaveButton",text:r.i18n.getText("saveBtn"),press:function(){t._saveButtonHandler();t._handleSettingsDialogClose.apply(t);},visible:true});},_dialogCancelButtonHandler:function(){var e=this.getView().getModel().getProperty("/userPreferences/entries");for(var i=0;i<e.length;i++){if(e[i]&&e[i].onCancel){e[i].onCancel();}}},_handleSettingsDialogClose:function(){var v=this.getView(),s=this.getSettingsDialogContent();s.oMainApp.toMaster('userSettingMaster');s.oController.oMasterEntryList.removeSelections(true);v.oSettingsDialog.close();},createCancelButton:function(){var t=this;return new B({id:"userSettingCancelButton",text:r.i18n.getText("cancelBtn"),press:function(){t._dialogCancelButtonHandler();t._handleSettingsDialogClose.apply(t);},visible:true});},onExit:function(){this.getView().aDanglingControls.forEach(function(c){if(c.destroyContent){c.destroyContent();}c.destroy();});}});},false);},"sap/ushell/components/shell/MeArea/MeArea.view.js":function(){sap.ui.define(["sap/ushell/services/AppType","sap/m/Button","sap/m/List","sap/m/Text","sap/m/VBox","sap/m/HBox","sap/m/Image","sap/m/Dialog","sap/m/Popover","sap/m/OverflowToolbar","sap/m/ScrollContainer","sap/ushell/resources","sap/ushell/ui/launchpad/UserStatusItem","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/ListSeparators"],function(a,B,L,T,V,H,I,D,P,O,S,r,U,A,b){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.MeArea",{createContent:function(c){this.addStyleClass('sapUshellMeAreaView');this.aDanglingControls=[];var u=sap.ushell.Container.getUser().getFullName(),p,t=r.i18n,C=(this.getViewData()?this.getViewData().config:{})||{},s=C.appState,d=(s==='embedded'||s==='embedded-home'||s==='standalone'||s==='blank-home'||s==='blank'),e,o=sap.ui.core.service.ServiceFactoryRegistry.get("sap.ushell.ui5service.UserStatus");if(o){var f=o.createInstance(),g=function(i){f.then(function(o){o.setStatus(i);p.close();});};}e=[new U({status:U.prototype.STATUS_ENUM.AVAILABLE,id:"userStatusItem1",isOpener:false,press:function(i){g(sap.ushell.ui5service.UserStatus.prototype.AvailableStatus.AVAILABLE);}.bind(this)}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.AWAY,id:"userStatusItem2",isOpener:false,press:function(i){g(sap.ushell.ui5service.UserStatus.prototype.AvailableStatus.AWAY);}.bind(this)}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.BUSY,id:"userStatusItem3",isOpener:false,press:function(i){g(sap.ushell.ui5service.UserStatus.prototype.AvailableStatus.BUSY);}.bind(this)}).addStyleClass('sapUserStatusContainer'),new U({status:U.prototype.STATUS_ENUM.APPEAR_OFFLINE,id:"userStatusItem4",isOpener:false,press:function(i){g(sap.ushell.ui5service.UserStatus.prototype.AvailableStatus.APPEAR_OFFLINE);}.bind(this)}).addStyleClass('sapUserStatusContainer')];if(!C.disableSignOut){e.push(new U({status:U.prototype.STATUS_ENUM.SIGNOUT,id:"userStatusLogout",isOpener:false,press:[c.logout,c]}).addStyleClass('sapUserStatusSignOutContainer'));}var h=new L({id:"sapUshellUserStatusItemList",showSeparators:"None",items:e});h.addCustomData(new A({key:"aria-labelledBy",value:"userStatusItem1",writeToDom:true}));p=new P("statuses",{placement:sap.m.PlacementType.Bottom,showArrow:false,showHeader:false,content:h}).addStyleClass('sapUserStatusPopOver');p.addStyleClass("sapContrastPlus");p.setOffsetX(-3);e=[new T({text:u}).addStyleClass('sapUshellMeAreaUserName')];var j=new U({id:"userStatusOpener",visible:{parts:["/userStatusEnabled","/userStatusUserEnabled"],formatter:function(i,v){if(i&&v){return true;}return false;}.bind(this)},status:{path:"/userStatus",formatter:function(i){return U.prototype.STATUS_ENUM[i];}.bind(this)},tooltip:t.getText("userStatus_tooltip"),image:sap.ui.core.IconPool.getIconURI("account"),press:function(i){var v=sap.ui.getCore().byId(i.mParameters.id);if(p.isOpen()){p.close();}else{p.openBy(v);}}.bind(this),contentList:p}).addStyleClass('sapUserStatusOpener');j.addCustomData(new A({key:"tabindex",value:"0",writeToDom:true}));j.addCustomData(new A({key:"aria-label",value:r.i18n.getText("OnlineStatus")+" "+t.getText("userStatus_tooltip"),writeToDom:true}));j.addCustomData(new A({key:"role",value:"listbox",writeToDom:true}));var l=new L({items:[j],backgroundDesign:sap.m.BackgroundDesign.Transparent});e.push(l);if(!C.disableSignOut){var k;if(!d){k=new B("logoutBtn",{visible:{parts:["/userStatusEnabled","/userStatusUserEnabled"],formatter:function(i,v){if(i&&v){return false;}return true;}.bind(this)},type:sap.m.ButtonType.Transparent,icon:'sap-icon://log',text:r.i18n.getText("signoutBtn_title"),press:[c.logout,c]});e.push(k);}else{k=new sap.ushell.ui.launchpad.ActionItem("logoutBtn",{visible:true,type:sap.m.ButtonType.Transparent,icon:'sap-icon://log',text:r.i18n.getText("signoutBtn_title"),press:[c.logout,c]});}}var m=new V({items:[e]}).addStyleClass("sapUshellUserArea");var n=sap.ushell.Container.getUser(),q=n.getImage(),w;if(!q){w=this.createPlaceHolderIcon();}else{w=this.createNewImage();}w.addStyleClass("sapUshellMeAreaUserImage");var x=new H({items:[w,m]});n.attachOnSetImage(this._updateUserImage.bind({origScope:this,oUserHBox:x,userBoxItem:w}));x.addStyleClass('sapUshellMeAreaUserInfo');x.addStyleClass('sapContrastPlus');var y=c.createSaveButton(),z=c.createCancelButton();this.oSettingsDialog=new D({id:"userSettingsDialog",showHeader:false,content:null,buttons:[y,z],afterClose:function(){sap.ushell.Container.getUser().resetChangedProperties();},stretch:sap.ui.Device.system.phone}).addStyleClass("sapUshellUserSetting");this.oSettingsDialog.addContent(c.getSettingsDialogContent());this.oSettingsDialog.addEventDelegate({onkeydown:function(i){if(i.keyCode===27){if(c&&typeof c._dialogCancelButtonHandler==="function"){c._dialogCancelButtonHandler();}}}.bind(this)});this.aDanglingControls.push(z,y,this.oSettingsDialog);x.addEventDelegate({onsapskipback:function(i){i.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(i);},onsaptabprevious:function(i){i.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(i);}});var E=new O({id:"overflowActions",design:sap.m.ToolbarDesign.Transparent,content:{path:"/currentState/actions",factory:function(i,v){var N=sap.ui.getCore().byId(v.getObject());if(N){if(N.setActionType){N.setActionType("action");N.addStyleClass('sapContrastPlus');}c._addPressHandlerToActions(N);}return N;}}});E._getOverflowButtonSize=function(){return 82.4;};E.addCustomData(new A({key:"aria-label",value:r.i18n.getText("overflowActions_AriaLabel"),writeToDom:true}));if(E._getOverflowButton){var F=E._getOverflowButton();if(F){var G=F.onAfterRendering;F.onAfterRendering=function(){if(G){G.apply(this,arguments);}this.addStyleClass('sapUshellActionItem').addStyleClass('sapContrastPlus');this.setText(r.i18n.getText('meAreaMoreActions'));};}}E.updateAggregation=function(N){var Q=this.mBindingInfos[N],R=this.getMetadata().getJSONKeys()[N],W;jQuery.each(this[R._sGetter](),jQuery.proxy(function(i,v){this[R._sRemoveMutator](v);},this));jQuery.each(Q.binding.getContexts(),jQuery.proxy(function(i,v){W=Q.factory(this.getId()+"-"+i,v)?Q.factory(this.getId()+"-"+i,v).setBindingContext(v,Q.model):"";this[R._sMutator](W);},this));};var M=new V("sapUshellMeAreaContent",{});this.actionBox=E;M.addItem(x);M.addItem(E);if(C.enableRecentActivity){var J=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty('/currentState/showRecentActivity');if(J===true){var K=this.createIconTabBar(c);K.done(function(i){M.addItem(i);var v=sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().getProperty("/enableTrackingActivity");i.setVisible(v);});}}this.actionBox.addEventDelegate({onsaptabnext:function(i){var v=i.originalEvent,N=v.srcElement,Q=jQuery('.sapUshellActionItem:last')[0].id,R,W;W=sap.ui.getCore().byId('meAreaIconTabBar').getVisible();R=Q===N.id;if(R===true&&!W){i.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(i);}},onsapskipforward:function(i){var v=sap.ui.getCore().byId('meAreaIconTabBar').getVisible();if(!v){i.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(i);}}});return new S({vertical:true,horizontal:false,height:"100%",content:M});},createIconTabBar:function(c){var R=new jQuery.Deferred(),t=this,i,o,d;sap.ui.require(['sap/m/IconTabBar','sap/m/CustomListItem','sap/m/IconTabFilter','sap/m/Text','sap/m/HBox'],function(e,C,f,T,H){i=new e('meAreaIconTabBar',{backgroundDesign:sap.m.BackgroundDesign.Transparent,expandable:false,items:[t.createIconTab("recentActivities",true,c,C,f,T,H),t.createIconTab("frequentActivities",false,c,C,f,T,H)]}).addStyleClass('sapUshellMeAreaTabBar');i.addEventDelegate({onsaptabnext:function(E){var g=E.originalEvent,s=g.srcElement,h=s.classList,j;j=jQuery.inArray('sapUshellMeAreaActivityItem',h)>-1;if(j===true){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}},onsapskipforward:function(E){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}});o=i.onAfterRendering;i.onAfterRendering=function(){if(o){o.apply(t,arguments);}d=sap.ui.getCore().byId('meAreaIconTabBar--header');if(d){d.addStyleClass('sapContrastPlus');d.addStyleClass('sapUshellTabBarHeader');}};R.resolve(i);});return R.promise();},createIconTab:function(i,s,c,C,d,T,H){var o,e,t,f,l,g,h,m,p,v;o=function(j,k){e=k.getProperty("icon");t=k.getProperty("title");f=a.getDisplayName(k.getProperty("appType"));var n=new T({text:t}).addStyleClass('sapUshellMeAreaActivityItemTitle'),q=new sap.ui.core.Icon({src:e}).addStyleClass('sapUshellMeAreaActivityItemIcon'),u=new T({text:f}).addStyleClass('sapUshellMeAreaActivityItemDescription'),w=new T({text:s?k.getProperty("timestamp"):""}).addStyleClass('sapUshellMeAreaActivityItemInfo'),x=new H({items:e?[q,u]:[u],justifyContent:"SpaceBetween"}),y=new H({items:s?[x,w]:[x],justifyContent:"SpaceBetween"}).addStyleClass('sapUshellMeAreaActivityItemContainer');l=new C({content:[n,y],type:sap.m.ListType.Active}).addStyleClass('sapUshellMeAreaActivityItem');l.addCustomData(new A({key:"aria-describedby",value:g.getId(),writeToDom:true}));return l;};g=new d({id:"sapUshellIconTabBar"+i,text:r.i18n.getText(i)});h=new L({id:"sapUshellActivityList"+i,showSeparators:b.All,items:{path:"meAreaModel>/apps/"+i,factory:o.bind(this)},noDataText:r.i18n.getText(i+'NoDataText'),itemPress:function(E){m=this.getModel('meAreaModel');v=sap.ui.getCore().byId("viewPortContainer");if(v){v.switchState("Center");}p=E.getParameter('listItem').getBindingContextPath();c.setLastVisited(m.getProperty(p).url);setTimeout(function(){var R={},j=sap.ushell.Container.getRenderer("fiori2");if(m.getProperty(p).url[0]==='#'){hasher.setHash(m.getProperty(p).url);}else{R.title=m.getProperty(p).title;R.appType="App";R.url=m.getProperty(p).url;R.appId=m.getProperty(p).url;j.logRecentActivity(R);window.open(m.getProperty(p).url,'_blank');}},200);}});g.addContent(h);return g;},onViewStateShow:function(){this.getController().refreshRecentActivities();this.getController().refreshFrequentActivities();if(this.actionBox){this.actionBox.updateAggregation("content");}this.getController().updateScrollBar(hasher.getHash());},createNewImage:function(){return new I({src:'{/userImage/personPlaceHolder}'});},createPlaceHolderIcon:function(){return new sap.ui.core.Icon({src:'{/userImage/personPlaceHolder}',size:'4rem'});},getControllerName:function(){return"sap.ushell.components.shell.MeArea.MeArea";},_updateUserImage:function(d){var u=(typeof d)==='string'?d:d.mParameters;this.oUserHBox.removeItem(this.userBoxItem);if((typeof u)==='string'){this.userBoxItem=this.origScope.createNewImage();}else{this.userBoxItem=this.origScope.createPlaceHolderIcon();}if(this.oUserHBox){this.oUserHBox.insertItem(this.userBoxItem,0);if(this.userBoxItem){this.userBoxItem.addStyleClass("sapUshellMeAreaUserImage");}}}});},false);},"sap/ushell/components/shell/MeArea/ThemeSelector.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.ThemeSelector",{onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.currentThemeId=this.oUser.getTheme();this.origThemeId=this.currentThemeId;this.aThemeList=null;this.isContentLoaded=false;this.aSapThemeMap={"base":"sapUshellBaseIconStyle","sap_bluecrystal":"sapUshellBlueCrystalIconStyle","sap_belize_hcb":"sapUshellHCBIconStyle","sap_belize_hcw":"sapUshellHCWIconStyle","sap_belize":"sapUshellBelizeIconStyle","sap_belize_plus":"sapUshellPlusIconStyle"};},getConfigurationModel:function(){var c=new sap.ui.model.json.JSONModel({});var a=this.getView().getModel()?this.getView().getModel().getProperty("/animationMode"):undefined;this.originalAnimationModeKey=a?a:"full";this.currentAnimationModeKey=this.originalAnimationModeKey;c.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),sapUiContentIconColor:sap.ui.core.theming.Parameters.get('sapUiContentIconColor'),isContentDensitySwitchEnable:this.isContentDensitySwitchEnable(),flexAlignItems:'Center',textAlign:sap.ui.Device.system.phone?'Left':'Right',textDirection:'Row',labelWidth:'auto',isCozyContentMode:this.isCozyContentMode(),animationMode:this.currentAnimationModeKey});return c;},_getIsChangeThemePermitted:function(){return this.oUser.isSetThemePermitted();},onAfterRendering:function(){var l=sap.ui.getCore().byId("userPrefThemeSelector--themeList"),i=l.getItems(),I,t,a=this;l.toggleStyleClass("sapUshellThemeListDisabled",!this.isListActive());i.forEach(function(L){t=L.getCustomData()[0].getValue();I=L.getContent()[0].getItems()[0].getItems()[0];if(!a.isListActive()){L.isSelectable=function(){return false;};}if(t===a.currentThemeId){L.setSelected(true);if(!a.isListActive()){L.toggleStyleClass("sapUshellThemeListItemSelected",true);}}else{L.setSelected(false);}I.addStyleClass(a.aSapThemeMap[t]);I.toggleStyleClass("sapUshellHCBIconStyleOnHCB",t===a.currentThemeId&&t==="sap_belize_hcb");I.toggleStyleClass("sapUshellHCWIconStyleOnHCW",a.currentThemeId!=="sap_belize_hcb"&&t==="sap_belize_hcw");});var c=sap.ui.getCore().byId("userPrefThemeSelector--contentDensitySwitch");if(c){c.setState(this.currentContentDensity==="cozy");c.setEnabled(this.isContentDensitySwitchEnable());}jQuery('.sapUshellAppearanceTable > table').attr('role','list');},getContent:function(){var t=this;var d=jQuery.Deferred();var r=sap.ushell.resources.getTranslationModel();this.getView().setModel(r,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");if(this.isContentDensitySwitchEnable()){this.origContentDensity=this.currentContentDensity;if(this.oUser.getContentDensity()){this.currentContentDensity=this.oUser.getContentDensity();}else{this.currentContentDensity="cozy";}}if(this.isContentLoaded===true){d.resolve(this.getView());}else{var a=this._getThemeList();a.done(function(T){if(T.length>0){T.sort(function(b,c){var e=b.name,f=c.name;if(e<f){return-1;}if(e>f){return 1;}return 0;});for(var i=0;i<T.length;i++){if(T[i].id==t.currentThemeId){T[i].isSelected=true;}else{T[i].isSelected=false;}}t.getView().getModel().setProperty("/options",T);d.resolve(t.getView());}else{d.reject();}});a.fail(function(){d.reject();});}return d.promise();},getValue:function(){var d=jQuery.Deferred();var t=this._getThemeList();var a=this;var b;t.done(function(T){a.aThemeList=T;b=a._getThemeNameById(a.currentThemeId);d.resolve(b);});t.fail(function(e){d.reject(e);});return d.promise();},onCancel:function(){this.currentThemeId=this.oUser.getTheme();if(this.isContentDensitySwitchEnable()){this.currentContentDensity=this.oUser.getContentDensity();}this.currentAnimationModeKey=this.originalAnimationModeKey;var a=sap.ui.getCore().byId("userPrefThemeSelector--animationModeCombo");if(a){a.setSelectedKey(this.originalAnimationModeKey);}},onSave:function(){var r=jQuery.Deferred(),w,p=[],t=0,s=0,f=0,F=[],a=this,b=function(){s++;r.notify();},c=function(){s++;r.notify();a.getView().getModel().setProperty("/animationMode",a.currentAnimationModeKey);a.originalAnimationModeKey=a.currentAnimationModeKey;},d=function(e){F.push({entry:"currEntryTitle",message:e});f++;r.notify();};var T=this.onSaveThemes();T.done(b);T.fail(d);p.push(T);if(this.currentAnimationModeKey!==this.originalAnimationModeKey){var A=this.writeUserAnimationModeToPersonalization(this.currentAnimationModeKey);A.done(c);A.fail(d);p.push(A);}if(this.isContentDensitySwitchEnable()){var C=this.onSaveContentDensity();C.done(b);C.fail(d);p.push(C);}w=jQuery.when.apply(null,p);w.done(function(){r.resolve();});r.progress(function(){if(f>0&&(f+s===t)){r.reject("At least one save action failed");}});return r.promise();},onSaveThemes:function(){var d=jQuery.Deferred();var u;if(this.oUser.getTheme()!=this.currentThemeId&&this.isListActive()){if(this.currentThemeId){this.oUser.setTheme(this.currentThemeId);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.origThemeId=this.currentThemeId;this.oUser.resetChangedProperties();d.resolve();}.bind(this));u.fail(function(e){this.oUser.setTheme(this.origThemeId);this.oUser.resetChangedProperties();this.currentThemeId=this.origThemeId;jQuery.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find theme: "+this.currentThemeId);}}else{d.resolve();}return d.promise();},_getThemeList:function(){var d=jQuery.Deferred(),t=this;if(!this.aThemeList){var g=this.userInfoService.getThemeList();g.done(function(D){t.aThemeList=D.options;if(t._getIsChangeThemePermitted()==false){t.aThemeList=[{id:t.currentThemeId,name:t._getThemeNameById(t.currentThemeId)}];}d.resolve(t.aThemeList);});g.fail(function(){d.reject("Failed to load theme list.");});}else{d.resolve(this.aThemeList);}return d.promise();},getCurrentThemeId:function(){return this.currentThemeId;},setCurrentThemeId:function(n){this.currentThemeId=n;},_getThemeNameById:function(t){if(this.aThemeList){for(var i=0;i<this.aThemeList.length;i++){if(this.aThemeList[i].id==t){return this.aThemeList[i].name;}}}return t;},onSaveContentDensity:function(){var d=jQuery.Deferred();var u;if(this.oUser.getContentDensity()!=this.currentContentDensity&&this.isContentDensitySwitchEnable()){if(this.currentContentDensity){this.oUser.setContentDensity(this.currentContentDensity);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperties();this.origContentDensity=this.currentContentDensity;sap.ui.getCore().getEventBus().publish("launchpad","toggleContentDensity",{contentDensity:this.currentContentDensity});d.resolve();}.bind(this));u.fail(function(e){this.oUser.setContentDensity(this.origContentDensity);this.oUser.resetChangedProperties();this.currentContentDensity=this.origContentDensity;jQuery.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find mode: "+this.currentContentDensity);}}else{d.resolve();}return d.promise();},getCurrentContentDensity:function(){return this.currentContentDensity;},isCozyContentMode:function(){return jQuery("body.sapUiSizeCozy").length?true:false;},setCurrentContentDensity:function(e){var n=e.getSource().getState()?"cozy":"compact";this.currentContentDensity=n;},setCurrentAnimationMode:function(e){var n=e.getSource().getSelectedKey();this.currentAnimationModeKey=n;},getIconFormatter:function(t){if(this.aSapThemeMap[t]){return"";}else{return"sap-icon://palette";}},onSelectHandler:function(e){var i=e.getParameters().listItem;this.setCurrentThemeId(i.getBindingContext().getProperty("id"));},isContentDensitySwitchEnable:function(){return(sap.ui.Device.system.combi&&this.getView().getModel().getProperty("/contentDensity")&&this.oUser.isSetContentDensityPermitted())||false;},isListActive:function(){return this.getView().getModel().getProperty("/setTheme");},getUserStatusSetting:function(){var p=this._getUserSettingsPersonalizer();return p.getPersData();},writeUserAnimationModeToPersonalization:function(u){var d,p;try{p=this.getPersonalizer().setPersData(u);}catch(e){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(e.name+": "+e.message);d=new jQuery.Deferred();d.reject(e);p=d.promise();}return p;},getPersonalizer:function(){if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization");var c=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:"flp.launchpad.animation.mode",item:"animationMode"};this.oPersonalizer=p.getPersonalizer(P,s,c);return this.oPersonalizer;}});},false);},"sap/ushell/components/shell/MeArea/ThemeSelector.view.xml":'<View\r\n        controllerName="sap.ushell.components.shell.MeArea.ThemeSelector"\r\n        height="100%"\r\n        width="100%"\r\n        xmlns="sap.uxap"\r\n        xmlns:t="sap.ui.table"\r\n        xmlns:m="sap.m"\r\n        xmlns:core="sap.ui.core">\r\n\r\n    <ObjectPageLayout id="ObjectPageLayout" enableLazyLoading="false" subSectionLayout="3"\r\n                      useTwoColumnsForLargeScreen="false">\r\n        <sections>\r\n            <ObjectPageSection title="{i18n>AppearanceThemeMenu}">\r\n                <subSections>\r\n                    <ObjectPageSubSection title="{i18n>AppearanceThemeMenu}" class="sapUshellAppearanceSubSectionList">\r\n                        <blocks>\r\n                            <m:List items="{path: \'/options\'}"\r\n                                    includeItemInSelection="true"\r\n                                    mode="SingleSelectMaster"\r\n                                    selectionChange="onSelectHandler"\r\n                                    id="themeList"\r\n                            >\r\n\r\n                                <m:items>\r\n                                    <m:CustomListItem selected="{isSelected}" class="sapUshellAppearanceCustomListItem">\r\n                                        <m:customData>\r\n                                            <core:CustomData key="themeid" value="{id}" writeToDom="true"/>\r\n                                        </m:customData>\r\n                                        <m:HBox>\r\n                                            <m:HBox class="sapUshellAppearanceItemViewLeft">\r\n                                                <core:Icon src="{parts:[{path:\'id\'}], formatter:\'.getIconFormatter\'}"\r\n                                                           color="{config>/sapUiContentIconColor}"\r\n                                                           size="1.75rem"\r\n                                                           class="sapUshellAppearanceIcon"\r\n                                                >\r\n                                                </core:Icon>\r\n                                                <m:Text text="{name}" class="sapUshellAppearanceItemText">\r\n                                                    <m:layoutData>\r\n                                                        <m:FlexItemData styleClass="sapUshellAppearanceFlexItemText"/>\r\n                                                    </m:layoutData>\r\n                                                </m:Text>\r\n                                            </m:HBox>\r\n                                            <m:HBox class="sapUshellAppearanceItemViewRight">\r\n                                                <core:Icon src="sap-icon://sys-enter-2"\r\n                                                           visible="{isSelected}"\r\n                                                           color="{config>/sapUiContentIconColor}"\r\n                                                           size="1.375rem"/>\r\n                                            </m:HBox>\r\n\r\n                                        </m:HBox>\r\n                                    </m:CustomListItem>\r\n                                </m:items>\r\n                            </m:List>\r\n                        </blocks>\r\n                    </ObjectPageSubSection>\r\n                </subSections>\r\n            </ObjectPageSection>\r\n\r\n            <ObjectPageSection title="{i18n>AppearanceLayoutAndBehaviorMenu}"\r\n                               class="sapUshellAppearanceDisplaySettingSection">\r\n\r\n                <subSections>\r\n                    <ObjectPageSubSection title="{i18n>AppearanceLayoutAndBehaviorMenu}">\r\n                        <blocks>\r\n                            <m:Table class="sapUshellAppearanceTable" showSeparators="None">\r\n                              <m:columns>\r\n                                <m:Column hAlign="End" vAlign="Top"></m:Column>\r\n                                <m:Column></m:Column>\r\n                            </m:columns>\r\n                            <m:items>\r\n                               <m:ColumnListItem>\r\n                                   <m:cells>\r\n                                       <m:Label text="{i18n>AppearanceContentDensityLabel}:"\r\n                                                class="sapUshellAppearanceLabel"\r\n                                                width="{config>/labelWidth}"\r\n                                                textAlign="{config>/textAlign}">\r\n                                       </m:Label>\r\n                                       <m:VBox alignItems="baseline" class="sapUshellAppearanceContentDensityText">\r\n                                           <m:Switch type="sap.m.SwitchType.Default" id="contentDensitySwitch"\r\n                                                     class="sapUshellAppearanceSwitchButton"\r\n                                                     tooltip="{i18n>AppearanceContentDensityTooltip}"\r\n                                                     change="setCurrentContentDensity"\r\n                                                     state="{config>/isCozyContentMode}"\r\n                                                     enabled="{config>/isContentDensitySwitchEnable}"\r\n                                                     ariaLabelledBy="contentDensitySwitch"/>\r\n                                           <m:Text text="{i18n>appearanceCompactCozyDescriptionText}"\r\n                                                   class="sapUshellFlpSettingsDescription"/>\r\n                                       </m:VBox>\r\n                                   </m:cells>\r\n                               </m:ColumnListItem>\r\n                               <m:ColumnListItem>\r\n                                   <m:cells>\r\n                                       <m:Label text="{i18n>AppearanceAnimationLabel}:"\r\n                                                class="sapUshellAppearanceLabel"\r\n                                                width="{config>/labelWidth}"\r\n                                                textAlign="{config>/textAlign}"\r\n                                                id="sapUshellAppearanceAnimationLabel">\r\n                                       </m:Label>\r\n                                       <m:VBox class="sapUshellAppearanceAnimationText">\r\n                                           <m:Select type="sap.m.SwitchType.Default" id="animationModeCombo"\r\n                                                     class="sapUshellAppearanceComboBox"\r\n                                                     change="setCurrentAnimationMode"\r\n                                                     selectedKey="{config>/animationMode}"\r\n                                                     ariaLabelledBy="sapUshellAppearanceAnimationLabel">\r\n                                               <core:Item key="full" text="{i18n>AppearanceAnimationFull}"/>\r\n                                               <core:Item key="minimal" text="{i18n>AppearanceAnimationMinimal}"/>\r\n                                           </m:Select>\r\n                                           <m:Text text="{i18n>appearanceAnimationDescriptionText}"\r\n                                                   class="sapUshellFlpSettingsDescription"/>\r\n                                       </m:VBox>\r\n                                   </m:cells>\r\n                               </m:ColumnListItem>\r\n                            </m:items>\r\n                        </m:Table>\r\n                        </blocks>\r\n                    </ObjectPageSubSection>\r\n                </subSections>\r\n            </ObjectPageSection>\r\n        </sections>\r\n\r\n    </ObjectPageLayout>\r\n</View>\r\n',"sap/ushell/components/shell/MeArea/UsageAnalyticsSelector.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.UsageAnalyticsSelector",{onInit:function(){this.oUser=sap.ushell.Container.getUser();this.switchStateValue=this.oUser.getTrackUsageAnalytics();this.getView().oSwitchButton.setState(this.switchStateValue);},getContent:function(){var t=this,d=jQuery.Deferred();d.resolve(t.getView());return d.promise();},getValue:function(){var d=jQuery.Deferred(),i=sap.ushell.resources.i18n;d.resolve(this.switchStateValue?i.getText("trackingEnabled"):i.getText("trackingDisabled"));return d.promise();},onSave:function(){var c=this.getView().oSwitchButton.getState();this.switchStateValue=c;return sap.ushell.Container.getService("UsageAnalytics").setTrackUsageAnalytics(c);},onCancel:function(){this.getView().oSwitchButton.setState(this.switchStateValue);}});},true);},"sap/ushell/components/shell/MeArea/UsageAnalyticsSelector.view.js":function(){sap.ui.define(['sap/m/Label','sap/ushell/resources'],function(L,r){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.UsageAnalyticsSelector",{createContent:function(c){var f=sap.ui.Device.system.phone?'Start':'Center',F=sap.ui.Device.system.phone?'Wrap':'NoWrap',s=sap.ui.Device.system.phone?'Column':'Row',t=sap.ui.Device.system.phone?'Left':'Right',a=sap.ui.Device.system.phone?'Baseline':'Auto',w=sap.ui.Device.system.phone?'auto':'11.75rem';this.oLabel=new L({width:w,textAlign:t,text:r.i18n.getText("allowTracking")+":"}).addStyleClass('sapUshellUsageAnalyticsSelectorLabel');this.oSwitchButton=new sap.m.Switch("usageAnalyticsSwitchButton",{type:sap.m.SwitchType.Default}).addStyleClass('sapUshellUsageAnalyticsSelectorSwitchButton');this.oMessage=new sap.m.Text({text:sap.ushell.Container.getService("UsageAnalytics").getLegalText()}).addStyleClass('sapUshellUsageAnalyticsSelectorLegalTextMessage');this.fBox=new sap.m.HBox({alignItems:f,wrap:F,direction:s,height:"2rem",items:[this.oLabel,this.oSwitchButton],layoutData:new sap.m.FlexItemData({alignSelf:a})});this.vBox=new sap.m.VBox({items:[this.fBox,this.oMessage]});return this.vBox;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.UsageAnalyticsSelector";}});},true);},"sap/ushell/components/shell/MeArea/UserProfiling.controller.js":function(){sap.ui.define(function(){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.UserProfiling",{onInit:function(){this.isContentLoaded=true;},onCancel:function(){var p=this.getView().getModel().getProperty("/userPreferences/profiling"),P,i;for(i=0;i<p.length;i++){P=p[i];if(P.onCancel){P.onCancel();}}},getValue:function(){var d=jQuery.Deferred();var p=this.getView().getModel().getProperty("/userPreferences/profiling");p.forEach(function(e,i){if(e.entryHelpID==="usageAnalytics"){if(!sap.ushell.Container.getService("UsageAnalytics").systemEnabled()||!sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted()){p.splice(i,1);}}},this);if(p!==undefined&&p.length>0){d.resolve({value:1,displayText:" "});}else{d.resolve({value:0,displayText:" "});}return d.promise();},onSave:function(){var r=jQuery.Deferred(),p=this.getView().getModel().getProperty("/userPreferences/profiling"),w,P=[],t=0,s=0,f=0,F=[],T,a=function(){s++;r.notify();},b=function(e){F.push({entry:"currEntryTitle",message:e});f++;r.notify();};p.forEach(function(i){T=i.onSave();T.done(a);T.fail(b);P.push(T);t++;});w=jQuery.when.apply(null,P);w.done(function(){r.resolve();});r.progress(function(){if(f>0&&(f+s===t)){r.reject("At least one save action failed");}});return r.promise();},getContent:function(){var t=this,d=jQuery.Deferred(),p=this.getView().getModel().getProperty("/userPreferences/profiling");p.forEach(function(i){var c=i.contentFunc();c.done(function(r){t.getView().profilingContent.addItem(r);});});d.resolve(t.getView());return d.promise();}});},false);},"sap/ushell/components/shell/MeArea/UserProfiling.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.UserProfiling",{createContent:function(c){this.profilingContent=new sap.m.VBox().addStyleClass("sapUshellUserSettingDetailContent");return this.profilingContent;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.UserProfiling";}});},false);},"sap/ushell/components/shell/MeArea/UserSettings.controller.js":function(){sap.ui.define(['sap/ushell/ui/launchpad/AccessibilityCustomData'],function(A){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.UserSettings",{onInit:function(){var v=this.getView(),t=this;this.navBackButton=new sap.m.ToggleButton({icon:sap.ui.Device.system.phone?"sap-icon://nav-back":"sap-icon://menu2",press:function(e){if(sap.ui.Device.system.phone){v.getSplitApp().backDetail();t._handleNavButton();this.setPressed(false);}else{if(v.getSplitApp().isMasterShown()){v.getSplitApp().hideMaster();this.setTooltip(sap.ushell.resources.i18n.getText("ToggleButtonShow"));this.setPressed(false);}else{v.getSplitApp().showMaster();this.setTooltip(sap.ushell.resources.i18n.getText("ToggleButtonHide"));this.setPressed(true);}}},tooltip:sap.ushell.resources.i18n.getText("ToggleButtonShow")});if(v&&v.getSplitApp()){v.getSplitApp().attachAfterMasterClose(t,function(){t._handleNavButton.apply(t);});v.getSplitApp().attachAfterMasterOpen(t,function(){t._handleNavButton.apply(t);});}},_handleNavButton:function(){var v=this.getView();if(v&&v.getSplitApp()&&v.getSplitApp().getCurrentDetailPage()){if(!v.getSplitApp().isMasterShown()){v.splitAppHeaderBar.addContentLeft(this.navBackButton);}else{if(sap.ui.Device.system.phone||sap.ui.Device.orientation.landscape){v.splitAppHeaderBar.removeAllContentLeft();}}}},getOriginalDialogContent:function(){if(!this.oInitialContent){var e;e=this.getEntryListControl();this.oInitialContent=new sap.ui.layout.VerticalLayout('userPreferencesLayout',{content:[e]}).addStyleClass("sapUshellUserSettingLayout");this.aDanglingControls.push(this.oInitialContent);}return this.oInitialContent;},createDetailPage:function(e,a,t,c){var b=this,v=b.getView(),o=new sap.m.ObjectHeader({title:t,backgroundDesign:sap.m.BackgroundDesign.Solid}).addStyleClass("sapUshellUserSettingDetailHeader");if(e==="userAccountEntry"){var u=sap.ushell.Container.getUser(),d=u.getImage();if(!d){o.setIcon(sap.ui.core.IconPool.getIconURI("sap-icon://person-placeholder"));}else{o.setIcon(this.getView().getModel().getProperty('/userImage/personPlaceHolder'));}u.attachOnSetImage(this.updateUserImage.bind({origScope:this,oObjectHeader:o}));o.setTitle(sap.ushell.Container.getUser().getFullName());}var p=new sap.m.Page('detail'+c.getId(),{content:[o,c],showHeader:false});p.addStyleClass("sapUsheUserSettingDetaildPage");p.onAfterRendering=function(){b._handleNavButton();};v.aDanglingControls.push(p);v.getModel().setProperty(a+"/contentResult",p);v.getSplitApp().addDetailPage(p);b.navToDetail(p.getId());},updateUserImage:function(d){var u=(typeof d)==='string'?d:d.mParameters;var i=true;if((typeof u)==='string'){if(u){i=false;}}else{if(!jQuery.isEmptyObject(u)){i=false;}}if(!i){this.oObjectHeader.setIcon(this.origScope.getView().getModel().getProperty('/userImage/personPlaceHolder'));}else{this.oObjectHeader.setIcon(sap.ui.core.IconPool.getIconURI("sap-icon://person-placeholder"));}},getListPressHandler:function(s,a){var t=this,i=true,b=s.getBindingContext().getPath(),v=this.getView(),c=v.getModel().getProperty(b+"/contentResult"),B=null,S=true,I=false,d=v.getModel().getProperty(b),f=d.contentFunc,C,k;if(sap.ui.Device.system.phone){s.setSelected(false);}if(c){t.navToDetail(c.getId(),a);t._handleNavButton();}else{if(typeof f==="function"){v.getModel().setProperty(b+"/isDirty",true);C=f();C.done(function(e){S=false;if(I===true){B.destroy();}if(e instanceof sap.ui.core.Control){t.createDetailPage.apply(t,[d.entryHelpID,b,d.title,e]);}else{i=false;}});C.fail(function(){S=false;if(I===true){B.destroy();}i=false;});C.always(function(){if(i===false){var e=new sap.m.FlexBox("userPrefErrorFlexBox",{height:"5rem",alignItems:sap.m.FlexAlignItems.Center,justifyContent:sap.m.FlexJustifyContent.Center,items:[new sap.m.Text("userPrefErrorText",{text:v.translationBundle.getText("loadingErrorMessage")})]});v.aDanglingControls.push(e);v.getModel().setProperty(b+"/contentResult",e);v.getSplitApp().addDetailPage(e);t.navToDetail(e.getId());}});if(S===true){B=new sap.m.BusyIndicator('userPrefLoadingBusyIndicator',{size:"2rem"});this.aDanglingControls.push(B);I=true;}}else{d.valueArgument().done(function(V){k=t._getKeyValueContent(d,V);t.createDetailPage(d.entryHelpID,b,d.title,k);}).fail(function(e){k=t._getKeyValueContent(d);t.createDetailPage(d.entryHelpID,b,d.title,k);});}}},_getKeyValueContent:function(e,E){var k,v,b,V=E?E:" ",f=sap.ui.Device.system.phone?'Start':'Center',F=sap.ui.Device.system.phone?'Wrap':'NoWrap',s=sap.ui.Device.system.phone?'Column':'Row';k=new sap.m.Label({text:e.title+":"}).addStyleClass('sapUshellUserSettingsDetailsKey');v=new sap.m.Input({value:V,editable:false}).addStyleClass('sapUshellUserSettingsDetailsValue');b=new sap.m.FlexBox({alignItems:f,wrap:F,direction:s,items:[k,v]});return b;},createMasterPages:function(){var t=this,e=t.getUserSettingsEntryTemplate();this.aDanglingControls=this.getView().aDanglingControls;this.oMasterEntryList=new sap.m.List('userSettingEnteryList',{items:{path:"/userPreferences/entries",template:e},mode:"SingleSelectMaster",select:function(a){t.getListPressHandler(a.getSource().getSelectedItem(),a.getId());}});var o=this.oMasterEntryList.onAfterRendering;this.oMasterEntryList.onAfterRendering=function(){var E=this.getItems();var a;o.apply(this,arguments);for(var i=0;i<E.length;i++){a=E[i].getBindingContext().getPath();t._setEntryValueResult(a);}if(!sap.ui.Device.system.phone){this.setSelectedItem(this.getItems()[0]);t.getListPressHandler(this.getSelectedItem());}};var p=new sap.m.Page("userSettingMaster",{showHeader:false,content:[this.oMasterEntryList]}).addStyleClass("sapUshellUserSettingMaster");t.aDanglingControls.push(this.oMasterEntryList,p);return p;},_setEntryValueResult:function(e){var v=this.getView(),m=v.getModel(),i=m.getProperty(e+"/editable"),a=m.getProperty(e+"/valueArgument"),V;if(typeof a==="function"){m.setProperty(e+"/valueResult",v.translationBundle.getText("genericLoading"));m.setProperty(e+"/editable",false);V=a();if(V){V.done(function(b){m.setProperty(e+"/editable",i);var c=true;if(m.getProperty(e+"/visible")!==undefined){c=m.getProperty(e+"/visible");}else if(m.getProperty(e+"/defaultVisibility")!==undefined){c=m.getProperty(e+"/defaultVisibility");}m.setProperty(e+"/visible",typeof(b)==='object'?!!b.value:c);m.setProperty(e+"/valueResult",typeof(b)==='object'?b.displayText:b);});V.fail(function(){m.setProperty(e+"/valueResult",v.translationBundle.getText("loadingErrorMessage"));});}}else if(!!a){m.setProperty(e+"/valueResult",a);m.setProperty(e+"/editable",i);}else{m.setProperty(e+"/valueResult",v.translationBundle.getText("loadingErrorMessage"));}},getUserSettingsEntryTemplate:function(){var i=new sap.m.StandardListItem({title:"{title}",description:"{valueResult}",icon:{parts:["icon","/userImage/account"],formatter:function(e,u){if(e==="sap-icon://account"){e=u;}return e?e:"sap-icon://action-settings";}},type:sap.ui.Device.system.phone?"Navigation":"Inactive",visible:{parts:[{path:'visible'},{path:'defaultVisibility'},{path:'/userPreferences/profiling/length'}],formatter:function(v,d){if(this.getTitle()===sap.ushell.resources.i18n.getText("userProfiling")){var p=this.getModel().getProperty("/userPreferences/profiling");p.forEach(function(e,a){if(e.entryHelpID==="usageAnalytics"){if(!sap.ushell.Container.getService("UsageAnalytics").systemEnabled()||!sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted()){p.splice(a,1);}}},this);return(p!==undefined&&p.length>0);}else{if(v!==undefined){return v;}else{return(d!==undefined)?d:true;}}}},customData:new A({key:"aria-label",value:{parts:[{path:'title'},{path:'valueResult'}],formatter:function(t,v){v=v?v:"";return t+" "+v;}},writeToDom:true})}).addStyleClass("sapUshellUserSettingMasterListItem");return i;},navToDetail:function(i,e){var v=this.getView(),s=v.getSplitApp();s.toDetail(i);if(e==="select"){this.applyFocus(i);}if(s.getMode()==="ShowHideMode"){s.hideMaster();}},applyFocus:function(i){if(!sap.ui.Device.system.phone){var e=jQuery.sap.byId(i).firstFocusableDomRef();if(e){jQuery.sap.focus(e);}}},onExit:function(){this.getView().aDanglingControls.forEach(function(c){if(c){if(c.destroyContent){c.destroyContent();}c.destroy();}});}});},false);},"sap/ushell/components/shell/MeArea/UserSettings.view.js":function(){sap.ui.define(["sap/ushell/resources","sap/m/Page","sap/m/Text","sap/m/SplitApp","sap/m/Bar"],function(r,P,T,S,B){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.UserSettings",{createContent:function(c){this.aDanglingControls=[];this.translationBundle=r.i18n;return this.getMainControl(c);},getMainControl:function(c){this.oMainApp=new S({id:"settingsApp",masterPages:c.createMasterPages(),defaultTransitionNameDetail:"show"});this.splitAppHeaderBar=new B({contentMiddle:new T({text:r.i18n.getText("userSettings")})});var p=new P({content:[this.oMainApp],customHeader:this.splitAppHeaderBar,showHeader:true}).addStyleClass('sapUshellSettingsPage');this.aDanglingControls.push(p);this.oMainApp._oDetailNav.setAutoFocus(false);return p;},getSplitApp:function(){return this.oMainApp;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.UserSettings";}});},false);},"sap/ushell/components/shell/MeArea/userAccount/UserAccountImgConsentSelector.fragment.xml":'<core:FragmentDefinition\n        height="100%"\n        width="100%"\n        xmlns="sap.uxap"\n        xmlns:m="sap.m"\n        xmlns:core="sap.ui.core">\n    <m:VBox>\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}"\n                   id="userImgConsentEnableFlexBox">\n            <m:Label text="{i18n>imgConsentMsg}:"\n                     class="sapUshellUserAccountLabel"/>\n        </m:FlexBox>\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}">\n            <m:Link text="{i18n>userImageConsentDialogShowTermsOfUse}" textAlign="{config>/textAlign}"\n                    class="sapUshellUserAccountLabel" press = "termsOfUserPress" id="termsOfUseLink"  />\n            <m:Label text="{i18n>userImageConsentText}:" visible="false" id="sapUshellUserImageConsentSwitchLabel"/>\n        </m:FlexBox>\n        <m:FlexBox direction="{config>/textDirection}" id="termsOfUseTextFlexBox"\n                   visible = "false">\n            <m:Text text="{i18n>userImageConsentDialogTermsOfUse}" class = "sapUshellUserConsentDialogTerms" />\n        </m:FlexBox>\n    </m:VBox>\n</core:FragmentDefinition>',"sap/ushell/components/shell/MeArea/userAccount/UserAccountSelector.controller.js":function(){sap.ui.define(['sap/ushell/ui5service/UserStatus','sap/ushell/ui/launchpad/AccessibilityCustomData'],function(U,A){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector",{onInit:function(){var t=this;var s=sap.ushell.Container.getRenderer("fiori2").getShellController();var S=s.getView();this.oShellConfig=(S.getViewData()?S.getViewData().config:{})||{};this.imgConsentEnabled=this.oShellConfig.enableUserImgConsent?this.oShellConfig.enableUserImgConsent:false;this.userStatusEnabled=this.oShellConfig.enableOnlineStatus&&U.prototype.isEnabled;this.userStatusEnabled=this.userStatusEnabled?this.userStatusEnabled:false;if(this.imgConsentEnabled){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){jQuery.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.currentUserImgConsent=this.oUser.getImageConsent();this.origUserImgConsent=this.currentUserImgConsent;this.addImgConsentEnableSwitch(this.currentUserImgConsent);}if(this.userStatusEnabled){if(this.isServiceEnable()){this.originalEnableStatus=null;this.originalUserStatus=null;var o=sap.ui.core.service.ServiceFactoryRegistry.get("sap.ushell.ui5service.UserStatus");var a=o.createInstance();a.then(function(o){t.oUserStatusService=o;var p=t._getUserStatusSetting();p.then(function(u){var b=u&&u.userStatusEnabled?u.userStatusEnabled:false;var d=u&&u.userStatusDefault?u.userStatusDefault:undefined;this.originalEnableStatus=b;this.originalUserStatus=d;t.userStatusButton=t._getOnlineStatusPopOver(this.originalUserStatus);t.addUserStatusDropdown();t.addUserEnableSwitch(b);}.bind(t));},function(E){});}}},getContent:function(){var d=jQuery.Deferred();var r=sap.ushell.resources.getTranslationModel();this.getView().setModel(r,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");d.resolve(this.getView());return d.promise();},getValue:function(){var d=jQuery.Deferred();d.resolve(sap.ushell.Container.getUser().getFullName());return d.promise();},onCancel:function(){if(this.userStatusEnabled){if(this.isServiceEnable()){this.oUserEnableOnlineStatusSwitch.setState(this.originalEnableStatus);this.userStatusButton.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM[this.originalUserStatus]);}}if(this.imgConsentEnabled){this.currentUserImgConsent=this.oUser.getImageConsent();this.oUserEnableImgConsentSwitch.setState(this.currentUserImgConsent);}},onSave:function(){var r=jQuery.Deferred(),w,u,a,p=[];if(this.userStatusEnabled){u=this.onSaveUserStatus();p.push(u);}if(this.imgConsentEnabled){a=this.onSaveUserImgConsent();p.push(a);}w=jQuery.when.apply(null,p);w.done(function(){r.resolve();});return r.promise();},onSaveUserImgConsent:function(){var d=jQuery.Deferred();var u;if(this.oUser.getImageConsent()!==this.currentUserImgConsent){if(this.currentUserImgConsent!=undefined){this.oUser.setImageConsent(this.currentUserImgConsent);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperties();this.origUserImgConsent=this.currentUserImgConsent;d.resolve();}.bind(this));u.fail(function(e){this.oUser.setImageConsent(this.origUserImgConsent);this.oUser.resetChangedProperties();this.currentUserImgConsent=this.origUserImgConsent;jQuery.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject(this.currentUserImgConsent+"is undefined");}}else{d.resolve();}return d.promise();},onSaveUserStatus:function(){var d=jQuery.Deferred(),u;if(this.isServiceEnable()){if(this.originalEnableStatus!==this.oUserEnableOnlineStatusSwitch.getState()||this.originalUserStatus!==this.userStatusButton.getStatus().status){if(!this.oUserEnableOnlineStatusSwitch.getState()){u=null;this.oUserStatusService.setStatus(null);}else{u=this.userStatusButton.getStatus()?this.userStatusButton.getStatus().status:"AVAILABLE";}this._writeUserStatusSettingToPersonalization({userStatusEnabled:this.oUserEnableOnlineStatusSwitch.getState(),userStatusDefault:u});if(!this.originalEnableStatus&&this.oUserEnableOnlineStatusSwitch.getState()){this.oUserStatusService.setStatus(u);}this.originalEnableStatus=this.oUserEnableOnlineStatusSwitch.getState();this.originalUserStatus=u;}}d.resolve();return d.promise();},addUserStatusDropdown:function(){var u=sap.ui.getCore().byId("UserAccountSelector--userStatusDropDownFlexBox");u.addItem(this.userStatusButton);},addUserEnableSwitch:function(e){var u=sap.ui.getCore().byId("UserAccountSelector--userStatusEnableFlexBox");this.oUserEnableOnlineStatusSwitch=new sap.m.Switch({type:sap.m.SwitchType.Default,state:e,change:function(E){this.userStatusButton.setEnabled(E.mParameters.state);jQuery("#"+this.userStatusButton.getId()).attr("tabindex",E.mParameters.state?0:-1);}.bind(this)});this.oUserEnableOnlineStatusSwitch.addCustomData(new A({key:"aria-labelledBy",value:"UserAccountSelector--sapUshellEnableStatusLabel",writeToDom:true}));this.userStatusButton.setEnabled(e);jQuery("#"+this.userStatusButton.getId()).attr("tabindex",e?0:-1);u.addItem(this.oUserEnableOnlineStatusSwitch);},isServiceEnable:function(){return U?U.prototype.isEnabled:false;},getConfigurationModel:function(){var c=new sap.ui.model.json.JSONModel({});var u=sap.ushell.Container.getUser();c.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),sapUiContentIconColor:sap.ui.core.theming.Parameters.get('sapUiContentIconColor'),isStatusEnable:this.originalEnableStatus?this.originalEnableStatus:false,flexAlignItems:sap.ui.Device.system.phone?'Stretch':'Center',textAlign:sap.ui.Device.system.phone?'Left':'Right',textDirection:sap.ui.Device.system.phone?'Column':'Row',labelWidth:sap.ui.Device.system.phone?"auto":"12rem",name:u.getFullName(),mail:u.getEmail(),server:window.location.host,imgConsentEnabled:this.imgConsentEnabled,isImageConsent:this.currentUserImgConsent,userStatusEnabled:this.userStatusEnabled});return c;},_getOnlineStatusPopOver:function(u){var p=new sap.m.Popover({placement:sap.m.PlacementType.Bottom,showArrow:true,showHeader:false,content:[new sap.ushell.ui.launchpad.UserStatusItem({status:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.AVAILABLE,isOpener:false,press:function(e){o.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.AVAILABLE);p.close();}}).addStyleClass('sapUserStatusContainer'),new sap.ushell.ui.launchpad.UserStatusItem({status:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.AWAY,isOpener:false,press:function(e){o.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.AWAY);p.close();}}).addStyleClass('sapUserStatusContainer'),new sap.ushell.ui.launchpad.UserStatusItem({status:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.BUSY,isOpener:false,press:function(e){o.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.BUSY);p.close();}}).addStyleClass('sapUserStatusContainer'),new sap.ushell.ui.launchpad.UserStatusItem({status:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.APPEAR_OFFLINE,isOpener:false,press:function(e){o.setStatus(sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM.APPEAR_OFFLINE);p.close();}}).addStyleClass('sapUserStatusContainer')]});var o=new sap.ushell.ui.launchpad.UserStatusItem({tooltip:"{i18n>headerActionsTooltip}",enabled:false,ariaLabel:sap.ushell.Container.getUser().getFullName(),image:sap.ui.core.IconPool.getIconURI("account"),status:u?sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM[u]:sap.ushell.ui.launchpad.UserStatusItem.prototype.STATUS_ENUM["AVAILABLE"],press:function(e){var b=sap.ui.getCore().byId(e.mParameters.id);p.openBy(b);}.bind(this),contentList:p}).addStyleClass('sapUserStatusOpener');return o;},_writeUserStatusSettingToPersonalization:function(u){var d,p;try{p=this._getUserSettingsPersonalizer().setPersData(u);}catch(e){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(e.name+": "+e.message);d=new jQuery.Deferred();d.reject(e);p=d.promise();}return p;},_getUserSettingsPersonalizer:function(){if(this.oUserPersonalizer===undefined){this.oUserPersonalizer=this._createUserPersonalizer();}return this.oUserPersonalizer;},_createUserPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization"),c,s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},P={container:"sap.ushell.services.UserStatus",item:"userStatusData"},o=p.getPersonalizer(P,s,c);return o;},_getUserStatusSetting:function(){var p=this._getUserSettingsPersonalizer();return p.getPersData();},addImgConsentEnableSwitch:function(e){var u=sap.ui.getCore().byId("UserAccountSelector--userImgConsentEnableFlexBox");this.oUserEnableImgConsentSwitch=new sap.m.Switch({customTextOff:sap.ushell.resources.i18n.getText("No"),customTextOn:sap.ushell.resources.i18n.getText("Yes"),type:sap.m.SwitchType.Default,state:e,change:this.setCurrentUserImgConsent.bind(this)});this.oUserEnableImgConsentSwitch.addCustomData(new A({key:"aria-labelledBy",value:"UserAccountSelector--sapUshellUserImageConsentSwitchLabel",writeToDom:true}));u.addItem(this.oUserEnableImgConsentSwitch);},setCurrentUserImgConsent:function(e){this.currentUserImgConsent=e.mParameters.state;},termsOfUserPress:function(){var t=sap.ui.getCore().byId("UserAccountSelector--termsOfUseTextFlexBox");var a=sap.ui.getCore().byId("UserAccountSelector--termsOfUseLink");var i=t.getVisible();if(i){t.setVisible(false);a.setText(sap.ushell.resources.i18n.getText("userImageConsentDialogShowTermsOfUse"));}else{a.setText(sap.ushell.resources.i18n.getText("userImageConsentDialogHideTermsOfUse"));t.setVisible(true);}}});},false);},"sap/ushell/components/shell/MeArea/userAccount/UserAccountSelector.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector",{createContent:function(c){var i=sap.ushell.resources.i18n;var f=sap.ui.Device.system.phone?'Column':'Row';var F=sap.ui.Device.system.phone?'Stretch':'Center';var t=sap.ui.Device.system.phone?'Left':'Right';var l=sap.ui.Device.system.phone?"auto":"12rem";var n=new sap.m.Label({text:i.getText("UserAccountNameFld")+":",width:l,textAlign:t});var a=new sap.m.Input("userAccountuserName",{value:"{/name}",editable:false}).addAriaLabelledBy(n);a.addEventDelegate({onfocusin:function(){jQuery("#userAccountuserName input").blur();}});var b=new sap.m.FlexBox({alignItems:F,direction:f,items:[n,a]});var e=new sap.m.Label({text:i.getText("UserAccountEmailFld")+":",width:l,textAlign:t});var d=new sap.m.FlexBox({alignItems:F,direction:f,items:[e,new sap.m.Input({value:"{/mail}",editable:false}).addAriaLabelledBy(e)]});var s=new sap.m.Label({text:i.getText("UserAccountServerFld")+":",width:l,textAlign:t});var g=new sap.m.FlexBox({alignItems:F,direction:f,items:[s,new sap.m.Input({value:"{/server}",editable:false}).addAriaLabelledBy(s)]});var v=new sap.m.VBox({items:[b,d,g]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector";}});},true);},"sap/ushell/components/shell/MeArea/userAccount/UserAccountSelector.view.xml":'<View\n        controllerName="sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector"\n        height="100%"\n        width="100%"\n        xmlns="sap.uxap"\n        xmlns:m="sap.m"\n        xmlns:core="sap.ui.core">\n\n    <ObjectPageLayout id="UserAccountObjectPageLayout" enableLazyLoading="false">\n        <sections>\n            <ObjectPageSection title="{i18n>UserAccountFld}">\n                <subSections>\n                    <ObjectPageSubSection title="{i18n>UserAccountFld}">\n                        <blocks>\n                            <core:Fragment fragmentName="sap.ushell.components.shell.MeArea.userAccount.UserAccountSetting"\n                                           type="XML"></core:Fragment>\n                        </blocks>\n                    </ObjectPageSubSection>\n                </subSections>\n            </ObjectPageSection>\n            <ObjectPageSection title="{i18n>UserAccountOnlineStatusTitle}"\n                               class="sapUshellUserAccountSection">\n                <subSections>\n                    <ObjectPageSubSection visible = "{config>/userStatusEnabled}" title="{i18n>UserAccountOnlineStatusTitle}">\n                        <blocks>\n                            <core:Fragment fragmentName="sap.ushell.components.shell.MeArea.userAccount.UserAccountStatusSelector"\n                                           type="XML"></core:Fragment>\n                        </blocks>\n                    </ObjectPageSubSection>\n                </subSections>\n            </ObjectPageSection>\n            <ObjectPageSection title="{i18n>ProfileImgId}">\n                <subSections>\n                    <ObjectPageSubSection visible = "{config>/imgConsentEnabled}">\n                        <blocks>\n                            <core:Fragment fragmentName="sap.ushell.components.shell.MeArea.userAccount.UserAccountImgConsentSelector"\n                                           type="XML"></core:Fragment>\n                        </blocks>\n                    </ObjectPageSubSection>\n                </subSections>\n            </ObjectPageSection>\n        </sections>\n\n    </ObjectPageLayout>\n</View>',"sap/ushell/components/shell/MeArea/userAccount/UserAccountSetting.fragment.xml":'<core:FragmentDefinition\n                         height="100%"\n                         width="100%"\n                         xmlns="sap.uxap"\n                         xmlns:m="sap.m"\n                         xmlns:core="sap.ui.core">\n    <m:VBox class="sapUiSmallMargin">\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}">\n            <m:Label text="{i18n>UserAccountNameFld}:"\n                     class="sapUshellUserAccountLabel"\n                     width="{config>/labelWidth}"\n                     textAlign="{config>/textAlign}"\n                     id="userAccountuserNameLable"/>\n            <m:Input value="{config>/name}"\n                     id="userAccountuserName"\n                     class="sapUshellUserAccountInput"\n                     editable="false"\n                     ariaLabelledBy="userAccountuserNameLable"/>\n\n        </m:FlexBox>\n\n\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}">\n            <m:Label text="{i18n>UserAccountEmailFld}:"\n                     class="sapUshellUserAccountLabel"\n                     width="{config>/labelWidth}"\n                     textAlign="{config>/textAlign}"\n                     id="userAccountuserMailLabel"/>\n            <m:Input value="{config>/mail}"\n                     id="userAccountuserMail"\n                     class="sapUshellUserAccountInput"\n                     editable="false"\n                     ariaLabelledBy="userAccountuserMailLabel"/>\n\n        </m:FlexBox>\n\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}">\n            <m:Label text="{i18n>UserAccountServerFld}:"\n                     class="sapUshellUserAccountLabel"\n                     width="{config>/labelWidth}"\n                     textAlign="{config>/textAlign}"\n                     id="userAccountuserServerLabel"/>\n            <m:Input value="{config>/server}"\n                     id="userAccountuserServer"\n                     class="sapUshellUserAccountInput"\n                     editable="false"\n                     ariaLabelledBy="userAccountuserServerLabel"/>\n\n        </m:FlexBox>\n\n    </m:VBox>\n</core:FragmentDefinition>',"sap/ushell/components/shell/MeArea/userAccount/UserAccountSetting.view.xml":'<View\n        controllerName="sap.ushell.components.shell.MeArea.userAccount.UserAccountSelector"\n        xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"\n        xmlns="sap.m">\n    <core:Fragment fragmentName="sap.ushell.components.shell.MeArea.userAccount.UserAccountSetting" type="XML"></core:Fragment>\n</View>',"sap/ushell/components/shell/MeArea/userAccount/UserAccountStatusSelector.fragment.xml":'<core:FragmentDefinition\n                         height="100%"\n                         width="100%"\n                         xmlns="sap.uxap"\n                         xmlns:m="sap.m"\n                         xmlns:core="sap.ui.core">\n    <m:VBox>\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}"\n                   id="userStatusEnableFlexBox">\n            <m:Label text="{i18n>enableStatusMessageBoxFld}:"\n                     class="sapUshellUserAccountLabel" id="sapUshellEnableStatusLabel"/>\n        </m:FlexBox>\n        <m:FlexBox direction="{config>/textDirection}" id="userStatusLegalMessageFlexBox1"\n                   class="ushellUserStatusLegalMessageFlexBox">\n            <m:Text text="{i18n>userStatusMessageBoxInfoTextLine1}"/>\n        </m:FlexBox>\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}"\n                   id="userStatusDropDownFlexBox" class="ushellUserStatusDropDownFlexBox">\n            <m:Label text="{i18n>userStatusSettingDropdownLabelFld}:"\n                     class="sapUshellUserAccountLabel"/>\n\n        </m:FlexBox>\n        <m:FlexBox direction="{config>/textDirection}" id="ushellDefaultStatusDescription"\n                   class="ushellUserStatusLegalMessageFlexBox">\n            <m:Text text="{i18n>userStatusDefaultStatusDescriptionLine1}"/>\n        </m:FlexBox>\n    </m:VBox>\n</core:FragmentDefinition>',"sap/ushell/components/shell/MeArea/userActivitiesHandler.controller.js":function(){sap.ui.define(['sap/ushell/components/applicationIntegration/AppLifeCycle'],function(A){"use strict";sap.ui.controller("sap.ushell.components.shell.MeArea.userActivitiesHandler",{onInit:function(){this.oModel=A.getElementsModel().getModel();this.isTrackingEnable=this.oModel.getProperty("/enableTrackingActivity")!=undefined?this.oModel.getProperty("/enableTrackingActivity"):true;this.currentTrackingMode=this.isTrackingEnable;this.oView.trackUserActivitySwitch.setState(this.isTrackingEnable);},getContent:function(){var d=jQuery.Deferred();d.resolve(this.getView());return d.promise();},getValue:function(){return jQuery.Deferred().resolve(" ");},onCancel:function(){var d=jQuery.Deferred();if(this.currentTrackingMode!=this.isTrackingEnable){this.isTrackingEnable=!this.isTrackingEnable;this.oView.trackUserActivitySwitch.setState(this.isTrackingEnable);}d.resolve();return d.promise();},onSave:function(){var d=jQuery.Deferred();if(this.currentTrackingMode!=this.isTrackingEnable){this.oModel.setProperty("/enableTrackingActivity",this.isTrackingEnable);this.writeUserActivityModeToPersonalization(this.isTrackingEnable);this.currentTrackingMode=this.isTrackingEnable;sap.ui.getCore().byId('meAreaIconTabBar').setVisible(this.isTrackingEnable);var m=sap.ui.getCore().byId('meArea');if(this.isTrackingEnable){var a=m.getController();if(!a.oUserRecentsSrvc){a.oUserRecentsSrvc=sap.ushell.Container.getService('UserRecents');}a.refreshRecentActivities();a.refreshFrequentActivities();d.resolve();}else{d.resolve();}}else{d.resolve();}return d.promise();},writeUserActivityModeToPersonalization:function(i){var d,p;try{p=this._getPersonalizer().setPersData(i);}catch(e){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(e.name+": "+e.message);d=new jQuery.Deferred();d.reject(e);p=d.promise();}return p;},_getPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization");var c=sap.ui.core.Component.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:"flp.settings.FlpSettings",item:"userActivitesTracking"};return p.getPersonalizer(P,s,c);},_handleCleanHistory:function(){sap.ushell.Container.getServiceAsync("UserRecents").then(function(s){s.clearRecentActivities();a();function a(){sap.ui.require(['sap/m/MessageToast'],function(M){var m=sap.ushell.resources.i18n.getText("savedChanges");M.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});};});},_handleTrackUserActivitySwitch:function(i){this.isTrackingEnable=i;}});},false);},"sap/ushell/components/shell/MeArea/userActivitiesHandler.view.js":function(){sap.ui.define(function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.MeArea.userActivitiesHandler",{createContent:function(c){var i=sap.ushell.resources.i18n;var f=sap.ui.Device.system.phone?'Column':'Row';var F=sap.ui.Device.system.phone?'Stretch':'Center';var t=sap.ui.Device.system.phone?'Left':'Right';this.trackingLabel=new sap.m.Label('trackingLabel',{text:i.getText("trackingLabel"),textAlign:t}).addStyleClass("sapUshellCleanActivityLabel");this.trackUserActivitySwitch=new sap.m.Switch("trackUserActivitySwitch",{type:sap.m.SwitchType.Default,customTextOn:i.getText("Yes"),customTextOff:i.getText("No"),change:function(e){c._handleTrackUserActivitySwitch(e.getParameter("state"));}});var T=new sap.m.FlexBox({alignItems:F,direction:f,items:[this.trackingLabel,this.trackUserActivitySwitch]});this.cleanActivityLabel=new sap.m.Label('cleanActivityLabel',{text:i.getText("cleanActivityLabel"),textAlign:t}).addStyleClass("sapUshellCleanActivityLabel");this.cleanActivityButton=new sap.m.Button({id:"cleanActivityButton",text:i.getText("cleanActivityButton"),press:c._handleCleanHistory});var a=new sap.m.FlexBox({alignItems:F,direction:f,items:[this.cleanActivityLabel,this.cleanActivityButton]});var v=new sap.m.VBox({items:[T,a]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.MeArea.userActivitiesHandler";}});},false);}},"Component-preload");
