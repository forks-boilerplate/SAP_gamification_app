// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(['sap/ushell/services/AppConfiguration','sap/ui/Device'],function(A,D){"use strict";function a(){this._getDefaultFavIcon=function(p){var f=p.get('sapUiShellFavicon');if(f){var m=/url[\s]*\('?"?([^\'")]*)'?"?\)/.exec(f);if(m){f=m[1];}else if(f==="''"||f==="none"){f=null;}}if(!f){var M=jQuery.sap.getModulePath("sap.ushell");return M+'/themes/base/img/launchpad_favicon.ico';}return f;};this.getFavIconHref=function(){return jQuery('link').filter('[rel="shortcut icon"]').attr('href')||'';};this.getAppIcon=function(){var i="sap-icon://folder",b=A.getMetadata();if(b&&b.icon){i=b.icon;}return i;};this.setAppIcons=function(m){sap.ui.require(["sap/ui/core/theming/Parameters"],function(P){jQuery.sap.measure.start("FLP:ShellController.setAppIcons","setAppIcons","FLP");var M=jQuery.sap.getModulePath("sap.ushell"),l=(m&&m.homeScreenIconPhone)||(M+'/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png'),L=(m&&m["homeScreenIconPhone@2"])||(M+'/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png'),o=(m&&m.homeScreenIconTablet)||(M+'/themes/base/img/launchicons/72_iPad_Desktop_Launch.png'),b=(m&&m["homeScreenIconTablet@2"])||(M+'/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png'),f=(m&&m.favIcon)||(this._getDefaultFavIcon(P)),c=this.getFavIconHref();if(D.os.ios){jQuery.sap.setIcons({'phone':l,'phone@2':L,'tablet':o,'tablet@2':b,'favicon':f,'precomposed':false});}else if(c!==f){jQuery.sap.setIcons({'phone':'','phone@2':'','tablet':'','tablet@2':'','favicon':f,'precomposed':true});}jQuery.sap.measure.end("FLP:ShellController.setAppIcons");}.bind(this));};this._applyContentDensityByPriority=function(i){if(i===undefined){if(D.system.combi){var u=sap.ushell.Container.getService("UserInfo"),U=u.getUser(),c="autoDetect";if(U){c=U.getContentDensity();}switch(c){case"cozy":i=false;break;case"compact":i=true;break;default:var b=A.getMetadata();if(b.compactContentDensity&&!b.cozyContentDensity){i=true;}else{i=false;}}}else{var b=A.getMetadata();if(b.compactContentDensity&&!b.cozyContentDensity){i=true;}else{if(!b.compactContentDensity&&b.cozyContentDensity){i=false;}else{i=this._isCompactContentDensityByDevice();}}}}this._applyContentDensityClass(i);};this._applyContentDensityClass=function(i){if(i===undefined){var u=sap.ushell.Container.getService("UserInfo"),U=u.getUser?u.getUser():undefined;if(U&&U.getContentDensity()==='cozy'){i=false;}else{i=this._isCompactContentDensityByDevice();}}if(i){jQuery('body').removeClass('sapUiSizeCozy');jQuery('body').addClass('sapUiSizeCompact');}else{jQuery('body').removeClass('sapUiSizeCompact');jQuery('body').addClass('sapUiSizeCozy');}};this._isCompactContentDensityByDevice=function(){var i;if(!D.support.touch||D.system.combi){i=true;}else{i=false;}return i;};this.getTitleDefaultValue=function(){var t="",b=A.getMetadata();if(b&&b.title){t=b.title;}return t;};}return new a();},true);
