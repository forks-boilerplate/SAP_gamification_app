// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(['sap/base/Log','sap/base/util/getObject','sap/ushell/services/Container',"sap/ushell/services/Personalization"],function(l,g){"use strict";var U=function(u,p,a){var o;function b(A){var d=[{id:"sap_belize",name:"SAP Belize"}],e=g(A,"config.themes",false);return e===undefined?d:e;}this.updateUserPreferences=function(c){var d=new jQuery.Deferred();function e(E){var s="Failed to update user preferences: "+(E&&E.message?E.message:E);l.error(s,E&&E.stack,"com.sap.ushell.adapters.local.UserInfo");}sap.ushell.Container.getServiceAsync("Personalization").then(function(P){var s={keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.LOW,clientStorageAllowed:true};function f(C,c){var h=c.getChangedProperties()||[];h.forEach(function(i){C.setItemValue(i.propertyName,i.newValue);});}P.getContainer("sap.ushell.UserProfile",s,undefined).done(function(C){f(C,c);C.save().fail(function(E){e(E);d.reject(E);}).done(function(){d.resolve();});}).fail(function(E){e(E);d.reject(E);});});return d.promise();};this.getThemeList=function(){var d=new jQuery.Deferred();if(o===undefined){o=b(a);}if(o.length===0){d.reject("no themes were configured");}else{d.resolve({options:o});}return d.promise();};this.getLanguageList=function(){var d=new jQuery.Deferred();d.resolve([{"text":"Browser Language","key":"default"},{"text":"en-US","key":"en-US"},{"text":"en-UK","key":"en-UK"},{"text":"en","key":"en"},{"text":"de-DE","key":"de-DE"},{"text":"he-IL","key":"he-IL"},{"text":"ru-RU","key":"ru-RU"},{"text":"ru","key":"ru"}]);return d.promise();};};return U;},true);
